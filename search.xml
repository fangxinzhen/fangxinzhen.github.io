<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>RHCE 笔记</title>
    <url>/2025/05/07/RHCE%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<h1 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h1><p>记录关于 RHCE9 版本的系统相关笔记，系统管理，安全，网络，存储等方面的摘记！<br><em>百度网盘资源分享见篇尾</em></p>
<span id="more"></span>
<h2 id="GNOME-桌面环境"><a href="#GNOME-桌面环境" class="headerlink" title="GNOME 桌面环境"></a>GNOME 桌面环境</h2><h3 id="桌面环境基础"><a href="#桌面环境基础" class="headerlink" title="桌面环境基础"></a>桌面环境基础</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144102.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144109.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144116.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144129.png" alt="Img"></p>
<h3 id="远程桌面"><a href="#远程桌面" class="headerlink" title="远程桌面"></a>远程桌面</h3><h4 id="单用户远程GNOME桌面"><a href="#单用户远程GNOME桌面" class="headerlink" title="单用户远程GNOME桌面"></a>单用户远程 GNOME 桌面</h4><p>支持远程中，客户端和服务端，均可控制查看桌面画面<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144211.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144217.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144300.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144306.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144311.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144314.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144318.png" alt="Img"><br>注意：gnome-server 服务的默认 vnc 端口是 5900<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144517.png" alt="Img"></p>
<h4 id="多用户远程GNOME桌面（tigervnc-server）"><a href="#多用户远程GNOME桌面（tigervnc-server）" class="headerlink" title="多用户远程GNOME桌面（tigervnc-server）"></a>多用户远程 GNOME 桌面（tigervnc-server）</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144541.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144545.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144549.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144553.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144557.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144601.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144604.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144608.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144613.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144616.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144620.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144623.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144627.png" alt="Img"></p>
<h4 id="远程访问基于-X11-的应用程序"><a href="#远程访问基于-X11-的应用程序" class="headerlink" title="远程访问基于 X11 的应用程序"></a>远程访问基于 X11 的应用程序</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144700.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144704.png" alt="Img"></p>
<h4 id="XRDP-VNC远程访问"><a href="#XRDP-VNC远程访问" class="headerlink" title="XRDP&amp;VNC远程访问"></a>XRDP&amp;VNC 远程访问</h4><p>1、安装桌面环境 GNOME</p>
<p> yum -y groups install “GNOME Desktop”<br>从命令行切换到桌面环境</p>
<p>startx<br>重新开启一个新的连接页面<br>获取当前启动模式</p>
<p>systemctl get-default<br>修改启动模式为图形化</p>
<p>systemctl set-default graphical.target<br>修改配置文件</p>
<p>vi /etc/gdm/custom.conf<br>增加如下配置</p>
<p>[daemon]<br>AutomaticLoginEnable=True<br>AutomaticLogin=root #默认启动桌面环境后以 root 用户自动登录<br>2、远程桌面设置<br>RDP 协议远程登录需要安装 XRDP，需要 epel 源</p>
<p>yum install epel-release -y<br>或者<br>wget -O /etc/yum.repos.d/epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo">http://mirrors.aliyun.com/repo/epel-7.repo</a></p>
<p>yum install -y xrdp<br>XRDP 会调用 VNC，安装 tigervnc-server（此处测试以 tigervnc 为例）</p>
<p>yum install -y tigervnc-server<br>启动 XRDP 并设置开机启动</p>
<p>systemctl start xrdp<br>systemctl enable xrdp<br>开放 3389 端口，或者关闭防火墙</p>
<p>firewall-cmd –permanent –zone=public –add-port=3389/tcp<br>firewall-cmd –reload<br>关闭防火墙并禁止防火墙开机启动</p>
<p>systemctl stop firewalld<br>systemctl disable firewalld<br>3、Windows 本地客户端测试<br>以上配置完成后，可以使用 Windows 自带的 mstsc 工具进行测试。<br>略。。。。<br>连接成功</p>
<p>进入以下界面，输入资产登录的用户名和密码。<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144736.png" alt="Img"><br>4、连接报错<br>1、连接后黑屏<br>修改 /etc/xrdp/startwm.sh 文件，在下图的位置加入这两行</p>
<p>unset DBUS_SESSION_BUS_ADDRESS<br>unset XDG_RUNTIME_DIR<br>重启生效</p>
<p>sudo systemctl restart xrdp<br>2、登陆时还需要再输入一遍密码<br>图形界面会自动锁屏，登陆时 XRDP 已经验证了一遍，但锁屏后还会要求再输入一遍密码。解决方式是关闭自动锁屏。<br>注意！关闭锁屏要在远程的界面操作。<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144750.png" alt="Img"></p>
<h2 id="配置基本系统设置"><a href="#配置基本系统设置" class="headerlink" title="配置基本系统设置"></a>配置基本系统设置</h2><h3 id="配置和管理基本网络访问"><a href="#配置和管理基本网络访问" class="headerlink" title="配置和管理基本网络访问"></a>配置和管理基本网络访问</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144819.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144824.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144827.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144831.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144834.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144839.png" alt="Img"></p>
<h3 id="配置日期和时间"><a href="#配置日期和时间" class="headerlink" title="配置日期和时间"></a>配置日期和时间</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144859.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508144903.png" alt="Img"></p>
<h3 id="使用-OPENSSH-的两个系统间使用安全通讯"><a href="#使用-OPENSSH-的两个系统间使用安全通讯" class="headerlink" title="使用 OPENSSH 的两个系统间使用安全通讯"></a>使用 OPENSSH 的两个系统间使用安全通讯</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145003.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145008.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145115.png" alt="Img"></p>
<h3 id="配置基本系统安全性"><a href="#配置基本系统安全性" class="headerlink" title="配置基本系统安全性"></a>配置基本系统安全性</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145129.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145134.png" alt="Img"></p>
<h3 id="RHEL-系统角色简介"><a href="#RHEL-系统角色简介" class="headerlink" title="RHEL 系统角色简介"></a>RHEL 系统角色简介</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145148.png" alt="Img"></p>
<h3 id="日志排障"><a href="#日志排障" class="headerlink" title="日志排障"></a>日志排障</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145203.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145207.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145211.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145216.png" alt="Img"></p>
<h3 id="管理用户和组"><a href="#管理用户和组" class="headerlink" title="管理用户和组"></a>管理用户和组</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145229.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145232.png" alt="Img"></p>
<h3 id="重置root密码"><a href="#重置root密码" class="headerlink" title="重置root密码"></a>重置 root 密码</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145246.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145251.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145254.png" alt="Img"></p>
<h3 id="管理-SUDO-访问"><a href="#管理-SUDO-访问" class="headerlink" title="管理 SUDO 访问"></a>管理 SUDO 访问</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145307.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145310.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145314.png" alt="Img"><br>### 管理文件系统权限<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145327.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145331.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145335.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145339.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145343.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145347.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145351.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145356.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145401.png" alt="Img"></p>
<h3 id="管理-SYSTEMD"><a href="#管理-SYSTEMD" class="headerlink" title="管理 SYSTEMD"></a>管理 SYSTEMD</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145415.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145419.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145422.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145426.png" alt="Img"></p>
<h3 id="chrony配置时间同步"><a href="#chrony配置时间同步" class="headerlink" title="chrony配置时间同步"></a>chrony 配置时间同步</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145442.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145445.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145449.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145452.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145455.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145500.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145503.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145506.png" alt="Img"></p>
<h2 id="管理、监控和更新内核"><a href="#管理、监控和更新内核" class="headerlink" title="管理、监控和更新内核"></a>管理、监控和更新内核</h2><h3 id="LINUX-内核"><a href="#LINUX-内核" class="headerlink" title="LINUX 内核"></a>LINUX 内核</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145622.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145626.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145630.png" alt="Img"><br>升级 Linux 的内核 kernel-core<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145639.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145643.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145647.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145652.png" alt="Img"></p>
<h3 id="使用-SYSTEMD-管理应用程序使用的资源"><a href="#使用-SYSTEMD-管理应用程序使用的资源" class="headerlink" title="使用 SYSTEMD 管理应用程序使用的资源"></a>使用 SYSTEMD 管理应用程序使用的资源</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145705.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145711.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145714.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145718.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145721.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145724.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145728.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145731.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145735.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145739.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145743.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145747.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145751.png" alt="Img"></p>
<h3 id="控制组cgroup"><a href="#控制组cgroup" class="headerlink" title="控制组cgroup"></a>控制组 cgroup</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145804.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145807.png" alt="Img"></p>
<h3 id="命名空间namespace"><a href="#命名空间namespace" class="headerlink" title="命名空间namespace"></a>命名空间 namespace</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145823.png" alt="Img"></p>
<h3 id="BCC分析系统性能-BPF-Compiler-Collection"><a href="#BCC分析系统性能-BPF-Compiler-Collection" class="headerlink" title="BCC分析系统性能(BPF Compiler Collection)"></a>BCC 分析系统性能 (BPF Compiler Collection)</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145835.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145840.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145843.png" alt="Img"></p>
<h2 id="使用-DNF-YUM-工具管理软件"><a href="#使用-DNF-YUM-工具管理软件" class="headerlink" title="使用 DNF (YUM)工具管理软件"></a>使用 DNF (YUM) 工具管理软件</h2><p>在 Red Hat Enterprise Linux (RHEL) 9 中，使用 DNF 工具来管理软件。出于与之前的主 RHEL 版本的兼<br>容性原因，您仍然可以使用 yum 命令。但是，在 RHEL 9 中， yum 是 dnf 的一个别名，它提供了与 yum 的一定程度的兼容性。但优先建议用 dnf 命令，因为有些命令 yum 不支持高级命令功能</p>
<h3 id="软件仓库-应用程序流-模块"><a href="#软件仓库-应用程序流-模块" class="headerlink" title="软件仓库&amp;应用程序流&amp;模块"></a>软件仓库 &amp; 应用程序流 &amp; 模块</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145941.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145944.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145947.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508145950.png" alt="Img"></p>
<h3 id="配置-DNF"><a href="#配置-DNF" class="headerlink" title="配置 DNF"></a>配置 DNF</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150012.png" alt="Img"></p>
<h3 id="搜索-Linux-的内容"><a href="#搜索-Linux-的内容" class="headerlink" title="搜索 Linux 的内容"></a>搜索 Linux 的内容</h3><h4 id="搜索软件包"><a href="#搜索软件包" class="headerlink" title="搜索软件包"></a>搜索软件包</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150032.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150035.png" alt="Img"></p>
<h4 id="列出软件包"><a href="#列出软件包" class="headerlink" title="列出软件包"></a>列出软件包</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150047.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150051.png" alt="Img"></p>
<h4 id="列出软件仓库"><a href="#列出软件仓库" class="headerlink" title="列出软件仓库"></a>列出软件仓库</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150107.png" alt="Img"></p>
<h4 id="显示软件包信息"><a href="#显示软件包信息" class="headerlink" title="显示软件包信息"></a>显示软件包信息</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150127.png" alt="Img"></p>
<h4 id="列出软件包组和它们提供的软件包"><a href="#列出软件包组和它们提供的软件包" class="headerlink" title="列出软件包组和它们提供的软件包"></a>列出软件包组和它们提供的软件包</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150138.png" alt="Img"></p>
<h4 id="列出可用模块及其内容"><a href="#列出可用模块及其内容" class="headerlink" title="列出可用模块及其内容"></a>列出可用模块及其内容</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150150.png" alt="Img"></p>
<h3 id="安装-删除-更新-RHEL-9-内容"><a href="#安装-删除-更新-RHEL-9-内容" class="headerlink" title="安装&amp;删除&amp;更新 RHEL 9 内容"></a>安装 &amp; 删除 &amp; 更新 RHEL 9 内容</h3><h4 id="install-remove-upgrade"><a href="#install-remove-upgrade" class="headerlink" title="install&amp;remove&amp;upgrade"></a>install&amp;remove&amp;upgrade</h4><h3 id="处理软件包管理历史记录"><a href="#处理软件包管理历史记录" class="headerlink" title="处理软件包管理历史记录"></a>处理软件包管理历史记录</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150234.png" alt="Img"></p>
<h4 id="列出事务"><a href="#列出事务" class="headerlink" title="列出事务"></a>列出事务</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150248.png" alt="Img"></p>
<h4 id="恢复-DNF-事务-恢复降级"><a href="#恢复-DNF-事务-恢复降级" class="headerlink" title="恢复 DNF 事务(恢复降级)"></a>恢复 DNF 事务 (恢复降级)</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150301.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150304.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150308.png" alt="Img"></p>
<h3 id="管理自定义软件存储库"><a href="#管理自定义软件存储库" class="headerlink" title="管理自定义软件存储库"></a>管理自定义软件存储库</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150323.png" alt="Img"></p>
<h4 id="添加-DNF-软件仓库"><a href="#添加-DNF-软件仓库" class="headerlink" title="添加 DNF 软件仓库"></a>添加 DNF 软件仓库</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150334.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150339.png" alt="Img"></p>
<h4 id="DNF（YUM）-命令列表"><a href="#DNF（YUM）-命令列表" class="headerlink" title="DNF（YUM） 命令列表"></a>DNF（YUM） 命令列表</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150354.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150358.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150402.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150405.png" alt="Img"></p>
<h2 id="部署-Web-服务器和反向代理"><a href="#部署-Web-服务器和反向代理" class="headerlink" title="部署 Web 服务器和反向代理"></a>部署 Web 服务器和反向代理</h2><h3 id="设置-APACHE-HTTP-WEB-服务器"><a href="#设置-APACHE-HTTP-WEB-服务器" class="headerlink" title="设置 APACHE HTTP WEB 服务器"></a>设置 APACHE HTTP WEB 服务器</h3><h4 id="APACHE-配置文件"><a href="#APACHE-配置文件" class="headerlink" title="APACHE 配置文件"></a>APACHE 配置文件</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150438.png" alt="Img"></p>
<h4 id="设置单实例-APACHE-HTTP-服务器"><a href="#设置单实例-APACHE-HTTP-服务器" class="headerlink" title="设置单实例 APACHE HTTP 服务器"></a>设置单实例 APACHE HTTP 服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150454.png" alt="Img"></p>
<h4 id="配置基于-APACHE-名称的虚拟主机"><a href="#配置基于-APACHE-名称的虚拟主机" class="headerlink" title="配置基于 APACHE 名称的虚拟主机"></a>配置基于 APACHE 名称的虚拟主机</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150507.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150511.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150515.png" alt="Img"></p>
<h4 id="在APACHE-HTTP服务器上配置TLS加密"><a href="#在APACHE-HTTP服务器上配置TLS加密" class="headerlink" title="在APACHE HTTP服务器上配置TLS加密"></a>在 APACHE HTTP 服务器上配置 TLS 加密</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150531.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150536.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150540.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150544.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150547.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150551.png" alt="Img"></p>
<h4 id="在-Apache-HTTP-服务器中设置支持的-TLS-协议版本"><a href="#在-Apache-HTTP-服务器中设置支持的-TLS-协议版本" class="headerlink" title="在 Apache HTTP 服务器中设置支持的 TLS 协议版本"></a>在 Apache HTTP 服务器中设置支持的 TLS 协议版本</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150606.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150610.png" alt="Img"></p>
<h4 id="配置-TLS-客户端证书身份验证"><a href="#配置-TLS-客户端证书身份验证" class="headerlink" title="配置 TLS 客户端证书身份验证"></a>配置 TLS 客户端证书身份验证</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150622.png" alt="Img"></p>
<h3 id="APACHE-Web-应用程序防火墙WAF（ModSecurity）"><a href="#APACHE-Web-应用程序防火墙WAF（ModSecurity）" class="headerlink" title="APACHE Web 应用程序防火墙WAF（ModSecurity）"></a>APACHE Web 应用程序防火墙 WAF（ModSecurity）</h3><h4 id="为-Apache-部署基于-web-的-ModSecurity-应用程序防火墙"><a href="#为-Apache-部署基于-web-的-ModSecurity-应用程序防火墙" class="headerlink" title="为 Apache 部署基于 web 的 ModSecurity 应用程序防火墙"></a>为 Apache 部署基于 web 的 ModSecurity 应用程序防火墙</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150649.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150652.png" alt="Img"></p>
<h4 id="向-ModSecurity-中添加自定义规则"><a href="#向-ModSecurity-中添加自定义规则" class="headerlink" title="向 ModSecurity 中添加自定义规则"></a>向 ModSecurity 中添加自定义规则</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150705.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150710.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150714.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150717.png" alt="Img"></p>
<h4 id="安装-APACHE-HTTP-服务器手册"><a href="#安装-APACHE-HTTP-服务器手册" class="headerlink" title="安装 APACHE HTTP 服务器手册"></a>安装 APACHE HTTP 服务器手册</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150733.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150736.png" alt="Img"></p>
<h4 id="使用-APACHE-模块"><a href="#使用-APACHE-模块" class="headerlink" title="使用 APACHE 模块"></a>使用 APACHE 模块</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150751.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150755.png" alt="Img"></p>
<h3 id="设置和配置-NGINX"><a href="#设置和配置-NGINX" class="headerlink" title="设置和配置 NGINX"></a>设置和配置 NGINX</h3><h4 id="安装并准备-NGINX"><a href="#安装并准备-NGINX" class="headerlink" title="安装并准备 NGINX"></a>安装并准备 NGINX</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150815.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150819.png" alt="Img"></p>
<h4 id="将-NGINX-配置为一个为不同域提供不同内容的-WEB-服务器"><a href="#将-NGINX-配置为一个为不同域提供不同内容的-WEB-服务器" class="headerlink" title="将 NGINX 配置为一个为不同域提供不同内容的 WEB 服务器"></a>将 NGINX 配置为一个为不同域提供不同内容的 WEB 服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150831.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150835.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150838.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150842.png" alt="Img"></p>
<h4 id="在-NGINX-WEB-服务器中添加-TLS-加密"><a href="#在-NGINX-WEB-服务器中添加-TLS-加密" class="headerlink" title="在 NGINX WEB 服务器中添加 TLS 加密"></a>在 NGINX WEB 服务器中添加 TLS 加密</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150858.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150903.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150906.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150910.png" alt="Img"></p>
<h4 id="将-NGINX-配置为-HTTP-流量的反向代理"><a href="#将-NGINX-配置为-HTTP-流量的反向代理" class="headerlink" title="将 NGINX 配置为 HTTP 流量的反向代理"></a>将 NGINX 配置为 HTTP 流量的反向代理</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150925.png" alt="Img"></p>
<h4 id="将-NGINX-配置为-HTTP-负载均衡器"><a href="#将-NGINX-配置为-HTTP-负载均衡器" class="headerlink" title="将 NGINX 配置为 HTTP 负载均衡器"></a>将 NGINX 配置为 HTTP 负载均衡器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150939.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508150943.png" alt="Img"></p>
<h3 id="配置-SQUID-缓存代理服务器"><a href="#配置-SQUID-缓存代理服务器" class="headerlink" title="配置 SQUID 缓存代理服务器"></a>配置 SQUID 缓存代理服务器</h3><p>略</p>
<h2 id="安装和使用动态编程语言"><a href="#安装和使用动态编程语言" class="headerlink" title="安装和使用动态编程语言"></a>安装和使用动态编程语言</h2><h3 id="使用-PHP-脚本"><a href="#使用-PHP-脚本" class="headerlink" title="使用 PHP 脚本"></a>使用 PHP 脚本</h3><p>超文本 Preprocessor (PHP) 是主要用于服务器端脚本的通用脚本语言。您可以使用 Web 服务器使用 PHP 运行 PHP 代码。<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151020.png" alt="Img"></p>
<h4 id="Apache-HTTP-服务器中使用-PHP"><a href="#Apache-HTTP-服务器中使用-PHP" class="headerlink" title="Apache HTTP 服务器中使用 PHP"></a>Apache HTTP 服务器中使用 PHP</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151042.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151046.png" alt="Img"></p>
<h4 id="Nginx-web-服务器使用-PHP"><a href="#Nginx-web-服务器使用-PHP" class="headerlink" title="Nginx web 服务器使用 PHP"></a>Nginx web 服务器使用 PHP</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151118.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151123.png" alt="Img"></p>
<h4 id="使用命令行界面运行-PHP-脚本"><a href="#使用命令行界面运行-PHP-脚本" class="headerlink" title="使用命令行界面运行 PHP 脚本"></a>使用命令行界面运行 PHP 脚本</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151137.png" alt="Img"></p>
<h2 id="配置和使用数据库服务器"><a href="#配置和使用数据库服务器" class="headerlink" title="配置和使用数据库服务器"></a>配置和使用数据库服务器</h2><h3 id="使用-MARIADB"><a href="#使用-MARIADB" class="headerlink" title="使用 MARIADB"></a>使用 MARIADB</h3><h4 id="安装-MARIADB"><a href="#安装-MARIADB" class="headerlink" title="安装 MARIADB"></a>安装 MARIADB</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151223.png" alt="Img"></p>
<h4 id="在容器中运行多个-MariaDB-版本"><a href="#在容器中运行多个-MariaDB-版本" class="headerlink" title="在容器中运行多个 MariaDB 版本"></a>在容器中运行多个 MariaDB 版本</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151242.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151245.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151249.png" alt="Img"></p>
<h4 id="配置-MARIADB"><a href="#配置-MARIADB" class="headerlink" title="配置 MARIADB"></a>配置 MARIADB</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151306.png" alt="Img"></p>
<h3 id="在-MARIADB-服务器上设置-TLS-加密"><a href="#在-MARIADB-服务器上设置-TLS-加密" class="headerlink" title="在 MARIADB 服务器上设置 TLS 加密"></a>在 MARIADB 服务器上设置 TLS 加密</h3><h4 id="将-CA-证书、服务器证书和私钥放在-MariaDB-服务器上"><a href="#将-CA-证书、服务器证书和私钥放在-MariaDB-服务器上" class="headerlink" title="将 CA 证书、服务器证书和私钥放在 MariaDB 服务器上"></a>将 CA 证书、服务器证书和私钥放在 MariaDB 服务器上</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151334.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151338.png" alt="Img"></p>
<h4 id="在-MariaDB-服务器上配置-TLS"><a href="#在-MariaDB-服务器上配置-TLS" class="headerlink" title="在 MariaDB 服务器上配置 TLS"></a>在 MariaDB 服务器上配置 TLS</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151357.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151400.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151404.png" alt="Img"></p>
<h4 id="对特定的用户帐户需要-TLS-加密连接"><a href="#对特定的用户帐户需要-TLS-加密连接" class="headerlink" title="对特定的用户帐户需要 TLS 加密连接"></a>对特定的用户帐户需要 TLS 加密连接</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151418.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151422.png" alt="Img"></p>
<h3 id="将-MariaDB-客户端配置为默认使用-TLS-加密"><a href="#将-MariaDB-客户端配置为默认使用-TLS-加密" class="headerlink" title="将 MariaDB 客户端配置为默认使用 TLS 加密"></a>将 MariaDB 客户端配置为默认使用 TLS 加密</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151436.png" alt="Img"></p>
<h3 id="备份-MARIADB-数据"><a href="#备份-MARIADB-数据" class="headerlink" title="备份 MARIADB 数据"></a>备份 MARIADB 数据</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151452.png" alt="Img"></p>
<h4 id="使用-mariadb-dump-执行逻辑备份"><a href="#使用-mariadb-dump-执行逻辑备份" class="headerlink" title="使用 mariadb-dump 执行逻辑备份"></a>使用 mariadb-dump 执行逻辑备份</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151505.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151510.png" alt="Img"></p>
<h4 id="使用-Mariabackup-工具执行物理在线备份"><a href="#使用-Mariabackup-工具执行物理在线备份" class="headerlink" title="使用 Mariabackup 工具执行物理在线备份"></a>使用 Mariabackup 工具执行物理在线备份</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151525.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151530.png" alt="Img"></p>
<h4 id="执行文件系统备份"><a href="#执行文件系统备份" class="headerlink" title="执行文件系统备份"></a>执行文件系统备份</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151548.png" alt="Img"></p>
<h3 id="复制-MARIADB（HA高可用）"><a href="#复制-MARIADB（HA高可用）" class="headerlink" title="复制 MARIADB（HA高可用）"></a>复制 MARIADB（HA 高可用）</h3><p>方法：使用 GALERA 集群类  复制 myql 功能，见下，但二者差别如下<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151608.png" alt="Img"></p>
<h4 id="MariaDB-Galera-集群介绍"><a href="#MariaDB-Galera-集群介绍" class="headerlink" title="MariaDB Galera 集群介绍"></a>MariaDB Galera 集群介绍</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151635.png" alt="Img"></p>
<h4 id="构建-MariaDB-Galera-集群的组件"><a href="#构建-MariaDB-Galera-集群的组件" class="headerlink" title="构建 MariaDB Galera 集群的组件"></a>构建 MariaDB Galera 集群的组件</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151650.png" alt="Img"></p>
<h4 id="部署-MariaDB-Galera-集群"><a href="#部署-MariaDB-Galera-集群" class="headerlink" title="部署 MariaDB Galera 集群"></a>部署 MariaDB Galera 集群</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151704.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151719.png" alt="Img"></p>
<h4 id="在-MariaDB-Galera-集群中添加新节点"><a href="#在-MariaDB-Galera-集群中添加新节点" class="headerlink" title="在 MariaDB Galera 集群中添加新节点"></a>在 MariaDB Galera 集群中添加新节点</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151732.png" alt="Img"></p>
<h4 id="重启-MariaDB-Galera-集群"><a href="#重启-MariaDB-Galera-集群" class="headerlink" title="重启 MariaDB Galera 集群"></a>重启 MariaDB Galera 集群</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151746.png" alt="Img"></p>
<h3 id="使用-MYSQL"><a href="#使用-MYSQL" class="headerlink" title="使用 MYSQL"></a>使用 MYSQL</h3><h4 id="安装-MYSQL"><a href="#安装-MYSQL" class="headerlink" title="安装 MYSQL"></a>安装 MYSQL</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151837.png" alt="Img"></p>
<h4 id="在容器中运行多个-MySQL-和-MariaDB-版本"><a href="#在容器中运行多个-MySQL-和-MariaDB-版本" class="headerlink" title="在容器中运行多个 MySQL 和 MariaDB 版本"></a>在容器中运行多个 MySQL 和 MariaDB 版本</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151853.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151858.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151901.png" alt="Img"></p>
<h3 id="mysql-配置备份恢复"><a href="#mysql-配置备份恢复" class="headerlink" title="mysql 配置备份恢复"></a>mysql 配置备份恢复</h3><p>略     同 mariadb 一模一样<br>mysql*  命令等同替换  mariadb*</p>
<h3 id="复制-MYSQL（HA高可用）"><a href="#复制-MYSQL（HA高可用）" class="headerlink" title="复制 MYSQL（HA高可用）"></a>复制 MYSQL（HA 高可用）</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508151959.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152002.png" alt="Img"></p>
<h4 id="配置-MySQL-源服务器"><a href="#配置-MySQL-源服务器" class="headerlink" title="配置 MySQL 源服务器"></a>配置 MySQL 源服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152022.png" alt="Img"></p>
<h4 id="配置-MySQL-副本服务器"><a href="#配置-MySQL-副本服务器" class="headerlink" title="配置 MySQL 副本服务器"></a>配置 MySQL 副本服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152035.png" alt="Img"></p>
<h4 id="在-MySQL-源服务器上创建复制用户"><a href="#在-MySQL-源服务器上创建复制用户" class="headerlink" title="在 MySQL 源服务器上创建复制用户"></a>在 MySQL 源服务器上创建复制用户</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152050.png" alt="Img"></p>
<h4 id="将副本服务器连接到源服务器"><a href="#将副本服务器连接到源服务器" class="headerlink" title="将副本服务器连接到源服务器"></a>将副本服务器连接到源服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152103.png" alt="Img"></p>
<h3 id="使用-POSTGRESQL"><a href="#使用-POSTGRESQL" class="headerlink" title="使用 POSTGRESQL"></a>使用 POSTGRESQL</h3><p>略，详情见官方源文档</p>
<h2 id="监控和管理系统状态和性能"><a href="#监控和管理系统状态和性能" class="headerlink" title="监控和管理系统状态和性能"></a>监控和管理系统状态和性能</h2><h3 id="使用-RHEL-系统角色监控性能"><a href="#使用-RHEL-系统角色监控性能" class="headerlink" title="使用 RHEL 系统角色监控性能"></a>使用 RHEL 系统角色监控性能</h3><h4 id="Ansible-一键安装-Grafana来监控系统"><a href="#Ansible-一键安装-Grafana来监控系统" class="headerlink" title="Ansible 一键安装 Grafana来监控系统"></a>Ansible 一键安装 Grafana 来监控系统</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152202.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152207.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152211.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152214.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152218.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152223.png" alt="Img"><br>其它请参考官方文档</p>
<h2 id="使用-systemd-单元文件自定义和优化您的系统"><a href="#使用-systemd-单元文件自定义和优化您的系统" class="headerlink" title="使用 systemd 单元文件自定义和优化您的系统"></a>使用 systemd 单元文件自定义和优化您的系统</h2><h3 id="使用-SYSTEMD-单元文件"><a href="#使用-SYSTEMD-单元文件" class="headerlink" title="使用 SYSTEMD 单元文件"></a>使用 SYSTEMD 单元文件</h3><h4 id="单元文件简介"><a href="#单元文件简介" class="headerlink" title="单元文件简介"></a>单元文件简介</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152257.png" alt="Img"></p>
<h4 id="单元文件结构"><a href="#单元文件结构" class="headerlink" title="单元文件结构"></a>单元文件结构</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152346.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152351.png" alt="Img"></p>
<h4 id="重要-UNIT-部分选项"><a href="#重要-UNIT-部分选项" class="headerlink" title="重要 [UNIT] 部分选项"></a>重要 [UNIT] 部分选项</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152413.png" alt="Img"></p>
<h4 id="重要-SERVICE-部分选项"><a href="#重要-SERVICE-部分选项" class="headerlink" title="重要 [SERVICE] 部分选项"></a>重要 [SERVICE] 部分选项</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152436.png" alt="Img"></p>
<h4 id="重要-INSTALL-部分选项"><a href="#重要-INSTALL-部分选项" class="headerlink" title="重要 [INSTALL] 部分选项"></a>重要 [INSTALL] 部分选项</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152540.png" alt="Img"></p>
<h4 id="创建自定义单元文件"><a href="#创建自定义单元文件" class="headerlink" title="创建自定义单元文件"></a>创建自定义单元文件</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152555.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152559.png" alt="Img"></p>
<h4 id="使用-SSHD-服务的第二个实例创建一个自定义单元文件"><a href="#使用-SSHD-服务的第二个实例创建一个自定义单元文件" class="headerlink" title="使用 SSHD 服务的第二个实例创建一个自定义单元文件"></a>使用 SSHD 服务的第二个实例创建一个自定义单元文件</h4><p>经典案例：创建第二个服务实例  （重要）<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152624.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152628.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152631.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152635.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152639.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152642.png" alt="Img"></p>
<h4 id="修改现有单元文件"><a href="#修改现有单元文件" class="headerlink" title="修改现有单元文件"></a>修改现有单元文件</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152658.png" alt="Img"></p>
<h3 id="优化-SYSTEMD-以缩短引导时间"><a href="#优化-SYSTEMD-以缩短引导时间" class="headerlink" title="优化 SYSTEMD 以缩短引导时间"></a>优化 SYSTEMD 以缩短引导时间</h3><h4 id="检查系统引导性能"><a href="#检查系统引导性能" class="headerlink" title="检查系统引导性能"></a>检查系统引导性能</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152724.png" alt="Img"></p>
<h4 id="为选择可安全禁用的服务提供指导信息"><a href="#为选择可安全禁用的服务提供指导信息" class="headerlink" title="为选择可安全禁用的服务提供指导信息"></a>为选择可安全禁用的服务提供指导信息</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152742.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152746.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508152750.png" alt="Img"></p>
<h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h3 id="识别安全更新"><a href="#识别安全更新" class="headerlink" title="识别安全更新"></a>识别安全更新</h3><h4 id="显示主机上未安装的安全更新"><a href="#显示主机上未安装的安全更新" class="headerlink" title="显示主机上未安装的安全更新"></a>显示主机上未安装的安全更新</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153000.png" alt="Img"></p>
<h4 id="使用-DNF-显示特定公告"><a href="#使用-DNF-显示特定公告" class="headerlink" title="使用 DNF 显示特定公告"></a>使用 DNF 显示特定公告</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153013.png" alt="Img"></p>
<h3 id="安装安全更新"><a href="#安装安全更新" class="headerlink" title="安装安全更新"></a>安装安全更新</h3><h4 id="安装所有可用的安全更新"><a href="#安装所有可用的安全更新" class="headerlink" title="安装所有可用的安全更新"></a>安装所有可用的安全更新</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153038.png" alt="Img"></p>
<h4 id="安装特定公告提供的安全更新"><a href="#安装特定公告提供的安全更新" class="headerlink" title="安装特定公告提供的安全更新"></a>安装特定公告提供的安全更新</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153055.png" alt="Img"></p>
<h4 id="自动安装安全更新"><a href="#自动安装安全更新" class="headerlink" title="自动安装安全更新"></a>自动安装安全更新</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153107.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153112.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153115.png" alt="Img"></p>
<h2 id="安全强化"><a href="#安全强化" class="headerlink" title="安全强化"></a>安全强化</h2><h3 id="在安装过程中和安装后保护-RHEL"><a href="#在安装过程中和安装后保护-RHEL" class="headerlink" title="在安装过程中和安装后保护 RHEL"></a>在安装过程中和安装后保护 RHEL</h3><h4 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153145.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153149.png" alt="Img"></p>
<h3 id="强制FIPS-模式"><a href="#强制FIPS-模式" class="headerlink" title="强制FIPS 模式"></a>强制 FIPS 模式</h3><p>联邦信息处理标准 (FIPS)<br>联邦信息处理标准 (FIPS) 公共 140 是国家标准与技术研究所开发的一系列计算机安全标准，以确保加密模<br>块的质量。FIPS 140 标准可确保加密工具正确实现其算法。运行时加密算法和完整性自我测试是一些机<br>制，用于确保系统使用符合标准要求的加密机制。<br>略 ///</p>
<h2 id="使用-SELinux"><a href="#使用-SELinux" class="headerlink" title="使用 SELinux"></a>使用 SELinux</h2><h3 id="SELINUX-入门"><a href="#SELINUX-入门" class="headerlink" title="SELINUX 入门"></a>SELINUX 入门</h3><p>SELinux（Security Enhanced Linux）提供了一个额外的系统安全层<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153249.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153253.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153256.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153259.png" alt="Img"></p>
<h3 id="更改-SELINUX-状态和模式"><a href="#更改-SELINUX-状态和模式" class="headerlink" title="更改 SELINUX 状态和模式"></a>更改 SELINUX 状态和模式</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153312.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153318.png" alt="Img"></p>
<h3 id="管理限制和未限制的用户"><a href="#管理限制和未限制的用户" class="headerlink" title="管理限制和未限制的用户"></a>管理限制和未限制的用户</h3><h4 id="限制和未限制的用户"><a href="#限制和未限制的用户" class="headerlink" title="限制和未限制的用户"></a>限制和未限制的用户</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153345.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153352.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153357.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153400.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153403.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153407.png" alt="Img"></p>
<h4 id="约束的非管理员角色"><a href="#约束的非管理员角色" class="headerlink" title="约束的非管理员角色"></a>约束的非管理员角色</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153443.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153447.png" alt="Img"></p>
<h4 id="受限的管理员角色"><a href="#受限的管理员角色" class="headerlink" title="受限的管理员角色"></a>受限的管理员角色</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153458.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153501.png" alt="Img"></p>
<h4 id="限制的用户身份添加新用户"><a href="#限制的用户身份添加新用户" class="headerlink" title="限制的用户身份添加新用户"></a>限制的用户身份添加新用户</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153517.png" alt="Img"></p>
<h4 id="限制常规用户"><a href="#限制常规用户" class="headerlink" title="限制常规用户"></a>限制常规用户</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153530.png" alt="Img"></p>
<h4 id="为-APACHE-HTTP-服务器自定义-SELINUX"><a href="#为-APACHE-HTTP-服务器自定义-SELINUX" class="headerlink" title="为 APACHE HTTP 服务器自定义 SELINUX"></a>为 APACHE HTTP 服务器自定义 SELINUX</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153548.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153552.png" alt="Img"></p>
<h4 id="使用-SELINUX-布尔值调整用于共享-NFS-和-CIFS-卷的策略"><a href="#使用-SELINUX-布尔值调整用于共享-NFS-和-CIFS-卷的策略" class="headerlink" title="使用 SELINUX 布尔值调整用于共享 NFS 和 CIFS 卷的策略"></a>使用 SELINUX 布尔值调整用于共享 NFS 和 CIFS 卷的策略</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153607.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153611.png" alt="Img"></p>
<h3 id="故障排除与-SELINUX-相关的问题"><a href="#故障排除与-SELINUX-相关的问题" class="headerlink" title="故障排除与 SELINUX 相关的问题"></a>故障排除与 SELINUX 相关的问题</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153626.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153630.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153633.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153637.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153641.png" alt="Img"></p>
<h3 id="多类别安全-MCS-进行数据保密性"><a href="#多类别安全-MCS-进行数据保密性" class="headerlink" title="多类别安全(MCS)进行数据保密性"></a>多类别安全 (MCS) 进行数据保密性</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153653.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153657.png" alt="Img"></p>
<h2 id="安全网络（超重点）"><a href="#安全网络（超重点）" class="headerlink" title="安全网络（超重点）"></a>安全网络（超重点）</h2><h3 id="openssh系统间安全通讯"><a href="#openssh系统间安全通讯" class="headerlink" title="openssh系统间安全通讯"></a>openssh 系统间安全通讯</h3><h4 id="SSH-和-OPENSSH"><a href="#SSH-和-OPENSSH" class="headerlink" title="SSH 和 OPENSSH"></a>SSH 和 OPENSSH</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153728.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153733.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153736.png" alt="Img"></p>
<h4 id="生成-SSH-密钥对"><a href="#生成-SSH-密钥对" class="headerlink" title="生成 SSH 密钥对"></a>生成 SSH 密钥对</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153748.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153752.png" alt="Img"></p>
<h4 id="将基于密钥的身份验证设置为-OPENSSH-服务器的唯一方法"><a href="#将基于密钥的身份验证设置为-OPENSSH-服务器的唯一方法" class="headerlink" title="将基于密钥的身份验证设置为 OPENSSH 服务器的唯一方法"></a>将基于密钥的身份验证设置为 OPENSSH 服务器的唯一方法</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153806.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153809.png" alt="Img"></p>
<h4 id="使用-SSH-AGENT-缓存-SSH-凭证"><a href="#使用-SSH-AGENT-缓存-SSH-凭证" class="headerlink" title="使用 SSH-AGENT 缓存 SSH 凭证"></a>使用 SSH-AGENT 缓存 SSH 凭证</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153822.png" alt="Img"></p>
<h4 id="设置更强大的的密钥类类型"><a href="#设置更强大的的密钥类类型" class="headerlink" title="设置更强大的的密钥类类型"></a>设置更强大的的密钥类类型</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153835.png" alt="Img"></p>
<h4 id="非默认端口"><a href="#非默认端口" class="headerlink" title="非默认端口"></a>非默认端口</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153847.png" alt="Img"></p>
<h4 id="root-强制密钥登录"><a href="#root-强制密钥登录" class="headerlink" title="root 强制密钥登录"></a>root 强制密钥登录</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153858.png" alt="Img"></p>
<h4 id="使用-X-安全性扩展-限制对特定用户、组或-IP-范围的-SSH-访问"><a href="#使用-X-安全性扩展-限制对特定用户、组或-IP-范围的-SSH-访问" class="headerlink" title="使用 X 安全性扩展 &amp; 限制对特定用户、组或 IP 范围的 SSH 访问"></a>使用 X 安全性扩展 &amp; 限制对特定用户、组或 IP 范围的 SSH 访问</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153911.png" alt="Img"></p>
<h4 id="通过-SSH-跳过主机连接到远程服务器"><a href="#通过-SSH-跳过主机连接到远程服务器" class="headerlink" title="通过 SSH 跳过主机连接到远程服务器"></a>通过 SSH 跳过主机连接到远程服务器</h4><p>类似与跳板机机制<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508153931.png" alt="Img"></p>
<h3 id="创建并管理-TLS-密钥和证书"><a href="#创建并管理-TLS-密钥和证书" class="headerlink" title="创建并管理 TLS 密钥和证书"></a>创建并管理 TLS 密钥和证书</h3><p>TLS （传输层安全）协议加密在两个系统间传输的通信。此标准将非对称加密与私钥和公钥、数字签名和证书一起使用。</p>
<h4 id="创建私有-CA"><a href="#创建私有-CA" class="headerlink" title="创建私有 CA"></a>创建私有 CA</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154023.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154029.png" alt="Img"></p>
<h4 id="为TLS-服务器证书创建私钥和-CSR"><a href="#为TLS-服务器证书创建私钥和-CSR" class="headerlink" title="为TLS 服务器证书创建私钥和 CSR"></a>为 TLS 服务器证书创建私钥和 CSR</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154041.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154045.png" alt="Img"></p>
<h4 id="为-TLS-客户端证书创建私钥和-CSR"><a href="#为-TLS-客户端证书创建私钥和-CSR" class="headerlink" title="为 TLS 客户端证书创建私钥和 CSR"></a>为 TLS 客户端证书创建私钥和 CSR</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154104.png" alt="Img"></p>
<h4 id="使用私有-CA-为-CSR-发布证书"><a href="#使用私有-CA-为-CSR-发布证书" class="headerlink" title="使用私有 CA 为 CSR 发布证书"></a>使用私有 CA 为 CSR 发布证书</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154135.png" alt="Img"></p>
<h3 id="使用共享的系统证书"><a href="#使用共享的系统证书" class="headerlink" title="使用共享的系统证书"></a>使用共享的系统证书</h3><h4 id="系统范围的信任存储"><a href="#系统范围的信任存储" class="headerlink" title="系统范围的信任存储"></a>系统范围的信任存储</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154158.png" alt="Img"></p>
<h4 id="添加新证书"><a href="#添加新证书" class="headerlink" title="添加新证书"></a>添加新证书</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154208.png" alt="Img"></p>
<h4 id="管理信任的系统证书"><a href="#管理信任的系统证书" class="headerlink" title="管理信任的系统证书"></a>管理信任的系统证书</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154222.png" alt="Img"></p>
<h3 id="计划并使用-TLS"><a href="#计划并使用-TLS" class="headerlink" title="计划并使用 TLS"></a>计划并使用 TLS</h3><h4 id="SSL-和-TLS-协议"><a href="#SSL-和-TLS-协议" class="headerlink" title="SSL 和 TLS 协议"></a>SSL 和 TLS 协议</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154242.png" alt="Img"></p>
<h4 id="TLS-重点关键信息组成"><a href="#TLS-重点关键信息组成" class="headerlink" title="TLS 重点关键信息组成"></a>TLS 重点关键信息组成</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154256.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154300.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154303.png" alt="Img"></p>
<h4 id="将-Apache-HTTP-服务器配置为使用-TLS"><a href="#将-Apache-HTTP-服务器配置为使用-TLS" class="headerlink" title="将 Apache HTTP 服务器配置为使用 TLS"></a>将 Apache HTTP 服务器配置为使用 TLS</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154318.png" alt="Img"></p>
<h4 id="将-Nginx-HTTP-和代理服务器配置为使用-TLS"><a href="#将-Nginx-HTTP-和代理服务器配置为使用-TLS" class="headerlink" title="将 Nginx HTTP 和代理服务器配置为使用 TLS"></a>将 Nginx HTTP 和代理服务器配置为使用 TLS</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154345.png" alt="Img"></p>
<h4 id="将-Dovecot-邮件服务器配置为使用-TLS"><a href="#将-Dovecot-邮件服务器配置为使用-TLS" class="headerlink" title="将 Dovecot 邮件服务器配置为使用 TLS"></a>将 Dovecot 邮件服务器配置为使用 TLS</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508154358.png" alt="Img"></p>
<h1 id="Networking"><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h1><h2 id="配置防火墙和数据包过滤器"><a href="#配置防火墙和数据包过滤器" class="headerlink" title="配置防火墙和数据包过滤器"></a>配置防火墙和数据包过滤器</h2><h3 id="Firewall-配置-NAT"><a href="#Firewall-配置-NAT" class="headerlink" title="Firewall 配置 NAT"></a>Firewall 配置 NAT</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160746.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160749.png" alt="Img"></p>
<h4 id="配置-IP-地址伪装"><a href="#配置-IP-地址伪装" class="headerlink" title="配置 IP 地址伪装"></a>配置 IP 地址伪装</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160813.png" alt="Img"></p>
<h4 id="使用-DNAT-转发传入的-HTTP-流量"><a href="#使用-DNAT-转发传入的-HTTP-流量" class="headerlink" title="使用 DNAT 转发传入的 HTTP 流量"></a>使用 DNAT 转发传入的 HTTP 流量</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160825.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160829.png" alt="Img"></p>
<h4 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h4><p>同 DNAT 配置</p>
<h3 id="用-RHEL-系统角色配置FIREWALLD"><a href="#用-RHEL-系统角色配置FIREWALLD" class="headerlink" title="用 RHEL 系统角色配置FIREWALLD"></a>用 RHEL 系统角色配置 FIREWALLD</h3><h4 id="重置-firewalld-设置"><a href="#重置-firewalld-设置" class="headerlink" title="重置 firewalld 设置"></a>重置 firewalld 设置</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160913.png" alt="Img"></p>
<h4 id="从一个本地端口转发到另一个本地端口"><a href="#从一个本地端口转发到另一个本地端口" class="headerlink" title="从一个本地端口转发到另一个本地端口"></a>从一个本地端口转发到另一个本地端口</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160934.png" alt="Img"></p>
<h4 id="允许-HTTPS-服务的传入流量"><a href="#允许-HTTPS-服务的传入流量" class="headerlink" title="允许 HTTPS 服务的传入流量"></a>允许 HTTPS 服务的传入流量</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508160947.png" alt="Img"></p>
<h3 id="NFTABLES-新网络管理工具"><a href="#NFTABLES-新网络管理工具" class="headerlink" title="NFTABLES 新网络管理工具"></a>NFTABLES 新网络管理工具</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161012.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161016.png" alt="Img"></p>
<h2 id="配置和管理网络"><a href="#配置和管理网络" class="headerlink" title="配置和管理网络"></a>配置和管理网络</h2><h3 id="配置linux网络绑定"><a href="#配置linux网络绑定" class="headerlink" title="配置linux网络绑定"></a>配置 linux 网络绑定</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161054.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161057.png" alt="Img"></p>
<h4 id="不同的网络绑定模式"><a href="#不同的网络绑定模式" class="headerlink" title="不同的网络绑定模式"></a>不同的网络绑定模式</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161110.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161113.png" alt="Img"></p>
<h4 id="使用-NMCLI-配置网络绑定"><a href="#使用-NMCLI-配置网络绑定" class="headerlink" title="使用 NMCLI 配置网络绑定"></a>使用 NMCLI 配置网络绑定</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161126.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161130.png" alt="Img"></p>
<h4 id="使用-NMSTATECTL-配置网络绑定"><a href="#使用-NMSTATECTL-配置网络绑定" class="headerlink" title="使用 NMSTATECTL 配置网络绑定"></a>使用 NMSTATECTL 配置网络绑定</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161144.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161147.png" alt="Img"></p>
<h4 id="使用-NETWORK-RHEL-系统角色配置网络绑定"><a href="#使用-NETWORK-RHEL-系统角色配置网络绑定" class="headerlink" title="使用 NETWORK RHEL 系统角色配置网络绑定"></a>使用 NETWORK RHEL 系统角色配置网络绑定</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161202.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161206.png" alt="Img"></p>
<h3 id="设置-IPSEC-VPN"><a href="#设置-IPSEC-VPN" class="headerlink" title="设置 IPSEC VPN"></a>设置 IPSEC VPN</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161219.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161223.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161226.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161230.png" alt="Img"></p>
<h3 id="配置-InfiniBand-和-RDMA-网络"><a href="#配置-InfiniBand-和-RDMA-网络" class="headerlink" title="配置 InfiniBand 和 RDMA 网络"></a>配置 InfiniBand 和 RDMA 网络</h3><p>请了解这个技术和业务场景即可<br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161256.png" alt="Img"></p>
<h1 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h1><h2 id="管理文件系统"><a href="#管理文件系统" class="headerlink" title="管理文件系统"></a>管理文件系统</h2><h3 id="文件系统概述"><a href="#文件系统概述" class="headerlink" title="文件系统概述"></a>文件系统概述</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161329.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161334.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161338.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161341.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161346.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161350.png" alt="Img"></p>
<h3 id="RHEL-系统角色管理本地存储"><a href="#RHEL-系统角色管理本地存储" class="headerlink" title="RHEL 系统角色管理本地存储"></a>RHEL 系统角色管理本地存储</h3><p>见源文档</p>
<h3 id="部署-NFS-服务器"><a href="#部署-NFS-服务器" class="headerlink" title="部署 NFS 服务器"></a>部署 NFS 服务器</h3><h4 id="次-NFSV4-版本的主要功能"><a href="#次-NFSV4-版本的主要功能" class="headerlink" title="次 NFSV4 版本的主要功能"></a>次 NFSV4 版本的主要功能</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161435.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161440.png" alt="Img"></p>
<h4 id="身份验证方法"><a href="#身份验证方法" class="headerlink" title="身份验证方法"></a>身份验证方法</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161454.png" alt="Img"></p>
<h4 id="导出的文件系统上的文件权限"><a href="#导出的文件系统上的文件权限" class="headerlink" title="导出的文件系统上的文件权限"></a>导出的文件系统上的文件权限</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161507.png" alt="Img"></p>
<h4 id="NFS-服务器上需要的服务"><a href="#NFS-服务器上需要的服务" class="headerlink" title="NFS 服务器上需要的服务"></a>NFS 服务器上需要的服务</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161518.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161521.png" alt="Img"></p>
<h4 id="ETC-EXPORTS-配置文件"><a href="#ETC-EXPORTS-配置文件" class="headerlink" title="/ETC/EXPORTS 配置文件"></a>/ETC/EXPORTS 配置文件</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161533.png" alt="Img"></p>
<h4 id="部署NFSV4-的服务器"><a href="#部署NFSV4-的服务器" class="headerlink" title="部署NFSV4 的服务器"></a>部署 NFSV4 的服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161548.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161551.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161555.png" alt="Img"></p>
<h4 id="部署NFSV3-服务器（兼容V4）"><a href="#部署NFSV3-服务器（兼容V4）" class="headerlink" title="部署NFSV3 服务器（兼容V4）"></a>部署 NFSV3 服务器（兼容 V4）</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161608.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161612.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161616.png" alt="Img"></p>
<h4 id="在-NFS-服务器上启用配额支持"><a href="#在-NFS-服务器上启用配额支持" class="headerlink" title="在 NFS 服务器上启用配额支持"></a>在 NFS 服务器上启用配额支持</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161628.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161631.png" alt="Img"></p>
<h4 id="部署并挂载-NFS-共享"><a href="#部署并挂载-NFS-共享" class="headerlink" title="部署并挂载 NFS 共享"></a>部署并挂载 NFS 共享</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161700.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161703.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161707.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161711.png" alt="Img"></p>
<h4 id="启用-NFS-客户端缓存"><a href="#启用-NFS-客户端缓存" class="headerlink" title="启用 NFS 客户端缓存"></a>启用 NFS 客户端缓存</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161723.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161729.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161732.png" alt="Img"></p>
<h3 id="使用-SAMBA-作为服务器"><a href="#使用-SAMBA-作为服务器" class="headerlink" title="使用 SAMBA 作为服务器"></a>使用 SAMBA 作为服务器</h3><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161745.png" alt="Img"><br>1<img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161749.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161753.png" alt="Img"></p>
<h4 id="SAMBA-设置为独立服务器"><a href="#SAMBA-设置为独立服务器" class="headerlink" title="SAMBA 设置为独立服务器"></a>SAMBA 设置为独立服务器</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161805.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161809.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161812.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161816.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161819.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161823.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161828.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161832.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161835.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161841.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161846.png" alt="Img"></p>
<h4 id="挂载-SMB-共享"><a href="#挂载-SMB-共享" class="headerlink" title="挂载 SMB 共享"></a>挂载 SMB 共享</h4><p><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161857.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161901.png" alt="Img"><br><img src="/./FILES/RHCE%E7%AC%94%E8%AE%B0.md/img-20250508161904.png" alt="Img"></p>
<p>待续。。。。。。</p>
<h1 id="资源分享"><a href="#资源分享" class="headerlink" title="资源分享"></a>资源分享</h1><p>通过网盘分享的文件：RHEL9-Linux 系统文档（中文精品）<br>链接: <a href="https://pan.baidu.com/s/14aRozhiKTNeNpxm7QiHsZA">https://pan.baidu.com/s/14aRozhiKTNeNpxm7QiHsZA</a> 提取码: sunu</p>
]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
  </entry>
  <entry>
    <title>Mysql 笔记</title>
    <url>/2025/05/13/Mysql%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>本篇主要是结合黑马程序员的 B 站学习视频和手册以及个人 Mysql 的学习笔记部分提取组成，大部分是基于重点摘要和复习角度来记录。<br>涉及内容：基础篇、高级篇、运维篇<br><em>百度网盘资源分享见篇尾</em></p>
<span id="more"></span>
<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="MySQL概述"><a href="#MySQL概述" class="headerlink" title="MySQL概述"></a>MySQL 概述</h2><h3 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h3><table>
<thead>
<tr>
<th>名称</th>
<th>全称</th>
<th>简称</th>
</tr>
</thead>
<tbody><tr>
<td>数据库</td>
<td>存储数据的仓库，数据是有组织的进行存储</td>
<td> DataBase（DB）</td>
</tr>
<tr>
<td>数据库管理系统</td>
<td>操纵和管理数据库的大型软件</td>
<td> DataBase ManagementSystem</td>
</tr>
<tr>
<td>SQL</td>
<td> 操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准</td>
<td> Structured QueryLanguage (SQL)</td>
</tr>
</tbody></table>
<h3 id="MySQL数据库"><a href="#MySQL数据库" class="headerlink" title="MySQL数据库"></a>MySQL 数据库</h3><p><strong>官方</strong>： <a href="https://www.mysql.com/">https://www.mysql.com/</a><br>MySQL 官方提供了两种不同的版本：<br>社区版本（MySQL Community Server）<br>免费， MySQL 不提供任何技术支持<br>商业版本（MySQL Enterprise Edition）<br>收费，可以使用 30 天，官方提供技术支持</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装 mysql 前，必须检查之前是否安装过，如果有则卸载掉，并删除所有可能的文件<br>/etc/my.       /var/lib/mysql 等路径下的文件</p>
<h4 id="YUM仓库安装"><a href="#YUM仓库安装" class="headerlink" title="YUM仓库安装"></a>YUM 仓库安装</h4><p><em>参考文档：<a href="https://dev.mysql.com/doc/refman/8.4/en/linux-installation-yum-repo.html">https://dev.mysql.com/doc/refman/8.4/en/linux-installation-yum-repo.html</a></em><br><em> 安装包下载：<a href="https://dev.mysql.com/downloads/repo/yum/">https://dev.mysql.com/downloads/repo/yum/</a>   （选择指定的系统兼容版本）</em><br><strong>优先使用这种方式安装</strong><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513113507.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513113510.png" alt="Img"></p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# wget <span class="attr">https</span>:<span class="comment">//dev.mysql.com/get/mysql84-community-release-el9-1.noarch.rpm</span></span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# yum localinstall mysql84-community-release-el9-<span class="number">1.</span>noarch.<span class="property">rpm</span></span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# rpm -q mysql84-community-release-el9-<span class="number">1.</span>noarch</span><br><span class="line">mysql84-community-release-el9-<span class="number">1.</span>noarch</span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# ls</span><br><span class="line">epel-modular.<span class="property">repo</span>  epel-testing-modular.<span class="property">repo</span>  epel-testing.<span class="property">repo</span>  mysql-community-debuginfo.<span class="property">repo</span>  mysql-community.<span class="property">repo</span>  mysql-community-source.<span class="property">repo</span>  redhat.<span class="property">repo</span></span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]#</span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# yum repolist enabled | grep mysql.*-community</span><br><span class="line">mysql-<span class="number">8.4</span>-lts-community          <span class="title class_">MySQL</span> <span class="number">8.4</span> <span class="variable constant_">LTS</span> <span class="title class_">Community</span> <span class="title class_">Server</span></span><br><span class="line">mysql-connectors-community       <span class="title class_">MySQL</span> <span class="title class_">Connectors</span> <span class="title class_">Community</span></span><br><span class="line">mysql-tools-<span class="number">8.4</span>-lts-community    <span class="title class_">MySQL</span> <span class="title class_">Tools</span> <span class="number">8.4</span> <span class="variable constant_">LTS</span> <span class="title class_">Community</span></span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# yum repolist all | grep mysql</span><br><span class="line">mysql-<span class="number">8.4</span>-lts-community                                       <span class="title class_">MySQL</span> <span class="number">8.4</span> <span class="variable constant_">LTS</span> 启用</span><br><span class="line">mysql-<span class="number">8.4</span>-lts-community-debuginfo                             <span class="title class_">MySQL</span> <span class="number">8.4</span> <span class="variable constant_">LTS</span> 禁用</span><br><span class="line">mysql-<span class="number">8.4</span>-lts-community-source                                <span class="title class_">MySQL</span> <span class="number">8.4</span> <span class="variable constant_">LTS</span> 禁用</span><br><span class="line">mysql-cluster-<span class="number">8.0</span>-community                                   <span class="title class_">MySQL</span> <span class="title class_">Cluster</span> 禁用</span><br><span class="line">mysql-cluster-<span class="number">8.0</span>-community-debuginfo                         <span class="title class_">MySQL</span> <span class="title class_">Cluster</span> 禁用</span><br><span class="line">mysql-cluster-<span class="number">8.0</span>-community-source                            <span class="title class_">MySQL</span> <span class="title class_">Cluster</span> 禁用</span><br><span class="line"></span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>           （安装想要的版本，否则默认是最新版本）</span><br><span class="line">[root@rhel9 yum.<span class="property">repos</span>.<span class="property">d</span>]# systemctl enable mysqld --now</span><br><span class="line">####</span><br><span class="line">如果 您的平台支持 yum-config-manager 或 <span class="variable constant_">DNF</span> config-manager 命令，您可以通过发出 以下命令禁用 <span class="number">8.4</span> 系列，并启用一个 <span class="number">8.0</span>系列：</span><br><span class="line"></span><br><span class="line">$&gt; sudo yum-config-manager --disable mysql-<span class="number">8.4</span>-lts-community</span><br><span class="line">$&gt; sudo yum-config-manager --enable  mysql80-community </span><br><span class="line">找到启用或禁用对应的mysql仓库</span><br><span class="line">####</span><br></pre></td></tr></tbody></table></figure>
<h4 id="源代码安装"><a href="#源代码安装" class="headerlink" title="源代码安装"></a>源代码安装</h4><p><em>参见：<a href="https://dev.mysql.com/doc/refman/8.4/en/source-installation.html">https://dev.mysql.com/doc/refman/8.4/en/source-installation.html</a></em><br><em> 下载：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></em><br><strong> 需要提前安装好编译工具 make,cmake,gcc 等</strong><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513113813.png" alt="Img"></p>
<h4 id="二进制包安装"><a href="#二进制包安装" class="headerlink" title="二进制包安装"></a>二进制包安装</h4><p><em>参见：<a href="https://dev.mysql.com/doc/refman/8.4/en/binary-installation.html">https://dev.mysql.com/doc/refman/8.4/en/binary-installation.html</a></em><br><em> 下载：<a href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></em><br><strong> 二进制安装包默认需要自行解决安装依赖，不建议使用这种方式</strong><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513113909.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513113915.png" alt="Img"></p>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p>全称 Structured Query Language，结构化查询语言。操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准 。</p>
<h3 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL 通用语法</h3><ul>
<li>SQL 语句可以单行或多行书写，以分号结尾。</li>
<li>SQL 语句可以使用空格 / 缩进来增强语句的可读性。</li>
<li>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</li>
<li>注释：<br>   单行注释：– 注释内容 或 # 注释内容<br>   多行注释：/* 注释内容 */</li>
</ul>
<h3 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL 分类</h3><p>SQL 语句，根据其功能，主要分为四类：DDL、DML、DQL、DCL。</p>
<table>
<thead>
<tr>
<th>分类</th>
<th>全称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td> DDL</td>
<td>Data DefinitionLanguage</td>
<td> 数据定义语言，用来定义数据库对象 (数据库，表，字段)</td>
</tr>
<tr>
<td>DML</td>
<td>Data Manipulation Language</td>
<td> 数据操作语言，用来对数据库表中的数据进行增删改</td>
</tr>
<tr>
<td> DQL</td>
<td>Data Query Language</td>
<td> 数据查询语言，用来查询数据库中表的记录</td>
</tr>
<tr>
<td> DCL</td>
<td>Data Control Language</td>
<td> 数据控制语言，用来创建数据库用户、控制数据库的访问权限</td>
</tr>
</tbody></table>
<p><strong>总结：DDL 是针对数据库、表、字段；DML 是针对表里边的真实数据内容的增删改（记住不包括查询）；DQL 是只针对表的查询；DCL 是针对数据库系统中的 数据库、用户、权限</strong></p>
<h3 id="图形化界面工具"><a href="#图形化界面工具" class="headerlink" title="图形化界面工具"></a>图形化界面工具</h3><p><em>古语有云：</em><br><em>工欲善其事必先利其器</em><br><em>磨刀不误砍柴工</em><br>我们在日常的开发中，会借助于 MySQL 的图形化界面，来简化开发，提高开发效率。而目前 mysql 主流的图形化界面工具，有以下几种：<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513115414.png" alt="Img"><br><strong>对我而言起初用得是 Navicat 工具，但是后面转向了 DataFrip 工具，就一个词：“比 Navicat 好用，信不信由你”<br>想要 DataGrip 的 PJ 版本，评论区留言分享全家桶给你！</strong></p>
<h4 id="安装与使用"><a href="#安装与使用" class="headerlink" title="安装与使用"></a>安装与使用</h4><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513120106.png" alt="Img"></p>
<h1 id="运维篇"><a href="#运维篇" class="headerlink" title="运维篇"></a>运维篇</h1><h2 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h2><p><em>参考文档：<a href="https://blog.csdn.net/q2524607033/article/details/133197100">https://blog.csdn.net/q2524607033/article/details/133197100</a></em><br>选择 mysql-community-server 8.4.4 版本测试（注意版本不同其某些命令可能被更新或弃用）<br>测试环境：一主一从</p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142325.png" alt="Img"></p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>重点事项<br>1，二进制日志文件：这个文件是 mysql 数据库修改或更新后产生的 SQL 数据，以二进制来存储<br>2，bin_log  &amp;  Position：主从复制的基准是  以二进制日志文件及偏移  为起始来开始复制。相当于 对于从数据库而言，从主数据库复制过来的 SQL 都是 ‘Position 偏移’ 之后的内容，如果其中内容涉及到偏移之前的 SQL，那么可能就会复制失败，因为数据不一致（主有从没有）。<br>所以一般两种复制情况：<br>1，主 和 从数据库都是干净的，都是刚初始化 mysql 的，二者都不一样数据完全一致<br>2，主数据库之前存在旧数据库，然后才开始部署从数据库来做主从复制。<br>      建议将主数据库所有（或目标）数据库备份并恢复到从数据库中保证复制作业前，主从数据库一致性<br>      主：  flush tables with read lock ;     （加全局锁）<br>               mysqldump -uroot -p –all-databases –add-drop-database &gt; xxx.sql<br>      从： mysql -uroot -p   (进入交互界面才能用 source)<br>              source xxx.sql<br>             change replication source to xxxx;<br>             rm -rf mysql-slave-relay-bin.xxxxx  (可选：删除之前的中继二进制日志文件)<br>             reset replica  (可选：重置主从复制作业环境)<br>      主从：systemctl restart mysqld<br>3，查询当前主数据库二进制日志状态：SHOW BINARY LOG STATUS;   （8.4.4 版本）<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142901.png" alt="Img"><br>4，从数据库节点连接主数据库配置副本连接信息：<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142916.png" alt="Img"><br>5，从数据库开始数据库复制作业：start replica ;<br>       注：需要重新主从复制作业请先暂停复制：stop replica ;<br>6，查看从数据库复制作业的状态：show replica status\G;<br>7，主从复制正常状态的对比：如下<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142928.png" alt="Img"></p>
<h3 id="常见排错"><a href="#常见排错" class="headerlink" title="常见排错"></a>常见排错</h3><p>1，删除从数据库的中继二进制日志文件<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142957.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143000.png" alt="Img"><br>2，重置 reset replica  作业<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143009.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143013.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143017.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143024.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143029.png" alt="Img"></p>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143122.png" alt="Img"></p>
<h2 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h2><h3 id="逻辑备份"><a href="#逻辑备份" class="headerlink" title="逻辑备份"></a>逻辑备份</h3><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142425.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142428.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142432.png" alt="Img"></p>
<h3 id="文件系统备份"><a href="#文件系统备份" class="headerlink" title="文件系统备份"></a>文件系统备份</h3><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513142554.png" alt="Img"></p>
<h2 id="读写分离"><a href="#读写分离" class="headerlink" title="读写分离"></a>读写分离</h2><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143510.png" alt="Img"></p>
<h3 id="Amoeba-For-Mysql"><a href="#Amoeba-For-Mysql" class="headerlink" title="Amoeba For Mysql"></a>Amoeba For Mysql</h3><p>参考链接：<a href="https://amoeba.sourceforge.net/doc/index.htm">https://amoeba.sourceforge.net/doc/index.htm</a></p>
<h3 id="Mycat数据库分库分表中间件"><a href="#Mycat数据库分库分表中间件" class="headerlink" title="Mycat数据库分库分表中间件"></a>Mycat 数据库分库分表中间件</h3><p><a href="https://www.mycat.org.cn/">https://www.mycat.org.cn/</a><br><a href="https://github.com/MyCATApache/Mycat-Server">https://github.com/MyCATApache/Mycat-Server</a><br><a href="http://mycatone.top/">http://mycatone.top/</a><br>布式数据库中间件 TDDL、Amoeba、Cobar、MyCAT<br>TDDL、Amoeba、Cobar、MyCAT 先后诞生于 2007、2008、2008、2012 年。<br>总结：从历史进度和技术上看的话，企业级的数据库的读写分离技术请使用 mycat<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143641.png" alt="Img"></p>
<h2 id="mycat"><a href="#mycat" class="headerlink" title="mycat"></a>mycat</h2><h3 id="简介及安装及配置"><a href="#简介及安装及配置" class="headerlink" title="简介及安装及配置"></a>简介及安装及配置</h3><p><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143730.png" alt="Img"></p>
<h3 id="mycat部署即读写分离实战"><a href="#mycat部署即读写分离实战" class="headerlink" title="mycat部署即读写分离实战"></a>mycat 部署即读写分离实战</h3><p>具体详细步骤见：<br>百度网盘 &gt;  数据库 &gt; MySQL 数据库 &gt;MySQL 数据库（黑马）<br>1，前提条件<br>mysql-community-server 8.4.4 版本<br>一主一从<br>主从复制（已配置完成）<br>mycat 安装包见百度网盘：数据库 &gt; mycat<br>mycat 安装在 mysql-master 主机中<br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143836.png" alt="Img"><br><img src="/./FILES/Mysql%E7%AC%94%E8%AE%B0.md/img-20250513143840.png" alt="Img"><br>待续。。。。。。</p>
<h1 id="资源分享"><a href="#资源分享" class="headerlink" title="资源分享"></a>资源分享</h1><p>通过网盘分享的文件：mycat 文档指南.pdf<br>链接: <a href="https://pan.baidu.com/s/15V1YroBPRb7c5GCYU0KFwg">https://pan.baidu.com/s/15V1YroBPRb7c5GCYU0KFwg</a> 提取码: wia8<br>通过网盘分享的文件：Mycat 所有平台安装包.zip<br>链接: <a href="https://pan.baidu.com/s/1qZgASAmGFd9ldcjr-R_FfA">https://pan.baidu.com/s/1qZgASAmGFd9ldcjr-R_FfA</a> 提取码: 7yts<br>通过网盘分享的文件：MySQL - 基础篇.pdf<br>链接: <a href="https://pan.baidu.com/s/1CO8sxV11vLrAB2_RX-DJRA">https://pan.baidu.com/s/1CO8sxV11vLrAB2_RX-DJRA</a> 提取码: neqd<br>通过网盘分享的文件：MySQL - 进阶篇.pdf<br>链接: <a href="https://pan.baidu.com/s/11fiqqcld05CmhTJV6C3RSg">https://pan.baidu.com/s/11fiqqcld05CmhTJV6C3RSg</a> 提取码: 8ge2<br>通过网盘分享的文件：MySQL - 运维篇.pdf<br>链接: <a href="https://pan.baidu.com/s/1IQoWUYerNMOhOP4km93RyA">https://pan.baidu.com/s/1IQoWUYerNMOhOP4km93RyA</a> 提取码: bj8f</p>
]]></content>
      <categories>
        <category>系统服务</category>
      </categories>
  </entry>
  <entry>
    <title>Rancher2.0&amp;k8s 笔记</title>
    <url>/2025/05/14/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>本篇主要记录的是基于 k8s 集群测试环境上的 Rancher 的安装以及控制台的管理和 chart 包管理及服务部署，如 ingress 控制器，Monitoring 集群监控器，存储类服务，镜像管理服务 Harbor 等</p>
<span id="more"></span>
<h1 id="Rancher"><a href="#Rancher" class="headerlink" title="Rancher"></a>Rancher</h1><h2 id="Rancher-概述"><a href="#Rancher-概述" class="headerlink" title="Rancher 概述"></a>Rancher 概述</h2><p>国内容器镜像下载网站：（精品）<br>旨在为开发者以及运维测试人员提供高效便捷的工具支持<br><a href="https://docker.aityp.com/">https://docker.aityp.com/</a><br>建议提前看资源清单的 image 中需要哪些镜像可以提前下载到本地 node 节点中</p>
<h3 id="Horizontal-Pod-Autoscaler（HPA）"><a href="#Horizontal-Pod-Autoscaler（HPA）" class="headerlink" title="Horizontal Pod Autoscaler（HPA）"></a>Horizontal Pod Autoscaler（HPA）</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514145041.png" alt="Img"></p>
<h3 id="负载均衡器和-Ingress-Controller"><a href="#负载均衡器和-Ingress-Controller" class="headerlink" title="负载均衡器和 Ingress Controller"></a>负载均衡器和 Ingress Controller</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514145048.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514145055.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514145059.png" alt="Img"></p>
<h3 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514145105.png" alt="Img"></p>
<h3 id="加密-HTTP-通信"><a href="#加密-HTTP-通信" class="headerlink" title="加密 HTTP 通信"></a>加密 HTTP 通信</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151104.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151148.png" alt="Img"></p>
<h3 id="ConfigMap"><a href="#ConfigMap" class="headerlink" title="ConfigMap"></a>ConfigMap</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151231.png" alt="Img"></p>
<h3 id="密文-secret"><a href="#密文-secret" class="headerlink" title="密文(secret)"></a>密文 (secret)</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151239.png" alt="Img"></p>
<h3 id="Helm-Charts-和-Apps"><a href="#Helm-Charts-和-Apps" class="headerlink" title="Helm Charts 和 Apps"></a>Helm Charts 和 Apps</h3><p>常用的工具<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151253.png" alt="Img"></p>
<h3 id="其他常用配置"><a href="#其他常用配置" class="headerlink" title="其他常用配置"></a>其他常用配置</h3><p>1，配置存储 - NFS 存储<br>参考链接步骤：<a href="https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/manage-clusters/provisioning-storage-examples/nfs-storage">https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/manage-clusters/provisioning-storage-examples/nfs-storage</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151317.png" alt="Img"></p>
<p>2，配置 NGINX 负载均衡器<br>参考链接：<a href="https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/infrastructure-setup/nginx-load-balancer">https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/infrastructure-setup/nginx-load-balancer</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151325.png" alt="Img"></p>
<h2 id="Rancher-安装"><a href="#Rancher-安装" class="headerlink" title="Rancher 安装"></a>Rancher 安装</h2><p>1，基于 RKE2，Kubernetes 发行版工具<br>2，基于 RKE，Kubernetes 发行版工具<br>区别：RKE2 不像 RKE1 一样依赖 Docker。RKE1 使用 Docker 来部署和管理 control plane 组件以及 Kubernetes 的容器运行时。RKE2 将 control plane 组件作为由 kubelet 管理的静态 pod 启动。嵌入式容器运行时是 containerd。<br>见：RKE 和 RKE2 文档</p>
<h2 id="Rancher-使用"><a href="#Rancher-使用" class="headerlink" title="Rancher 使用"></a>Rancher 使用</h2><p>高级功能文档：<a href="https://ranchermanager.docs.rancher.com/zh/">https://ranchermanager.docs.rancher.com/zh/</a></p>
<h3 id="准备kubernets集群"><a href="#准备kubernets集群" class="headerlink" title="准备kubernets集群"></a>准备 kubernets 集群</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151506.png" alt="Img"></p>
<h3 id="导入k8s集群"><a href="#导入k8s集群" class="headerlink" title="导入k8s集群"></a>导入 k8s 集群</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151511.png" alt="Img"></p>
<h3 id="安装集群工具"><a href="#安装集群工具" class="headerlink" title="安装集群工具"></a>安装集群工具</h3><p>rancher 内置的常用集群工具：如下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151523.png" alt="Img"></p>
<h3 id="chart仓库"><a href="#chart仓库" class="headerlink" title="chart仓库"></a>chart 仓库</h3><p>优先建议使用 chart 仓库来一键个性化安装，推荐使用官方的 helm 应用中心来安装部署所需要的应用程序或服务<br>地址如下：<a href="https://artifacthub.io/">https://artifacthub.io/</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151528.png" alt="Img"></p>
<h3 id="安装K8S集群"><a href="#安装K8S集群" class="headerlink" title="安装K8S集群"></a>安装 K8S 集群</h3><h4 id="基于rancher的模版来安装k8s集群"><a href="#基于rancher的模版来安装k8s集群" class="headerlink" title="基于rancher的模版来安装k8s集群"></a>基于 rancher 的模版来安装 k8s 集群</h4><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151537.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151547.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151552.png" alt="Img"><br>待续！！！</p>
<h4 id="使用-Rancher-启动-Kubernetes"><a href="#使用-Rancher-启动-Kubernetes" class="headerlink" title="使用 Rancher 启动 Kubernetes"></a>使用 Rancher 启动 Kubernetes</h4><p><a href="https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/launch-kubernetes-with-rancher">https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/launch-kubernetes-with-rancher</a></p>
<h2 id="Rancher高级功能"><a href="#Rancher高级功能" class="headerlink" title="Rancher高级功能"></a>Rancher 高级功能</h2><h3 id="使用-Harvester-在-Kubernetes-上进行虚拟化"><a href="#使用-Harvester-在-Kubernetes-上进行虚拟化" class="headerlink" title="使用 Harvester 在 Kubernetes 上进行虚拟化,"></a>使用 Harvester 在 Kubernetes 上进行虚拟化，</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151639.png" alt="Img"></p>
<h3 id="使用-Longhorn-进行云原生存储"><a href="#使用-Longhorn-进行云原生存储" class="headerlink" title="使用 Longhorn 进行云原生存储"></a>使用 Longhorn 进行云原生存储</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151643.png" alt="Img"></p>
<h3 id="使用-NeuVector-实现容器安全"><a href="#使用-NeuVector-实现容器安全" class="headerlink" title="使用 NeuVector 实现容器安全"></a>使用 NeuVector 实现容器安全</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151649.png" alt="Img"></p>
<h3 id="使用-Fleet-进行持续交付"><a href="#使用-Fleet-进行持续交付" class="headerlink" title="使用 Fleet 进行持续交付"></a>使用 Fleet 进行持续交付</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151654.png" alt="Img"></p>
<h3 id="常部署工具"><a href="#常部署工具" class="headerlink" title="*常部署工具"></a>* 常部署工具</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151701.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151709.png" alt="Img"></p>
<h3 id="CIS-扫描"><a href="#CIS-扫描" class="headerlink" title="CIS 扫描"></a>CIS 扫描</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151834.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151838.png" alt="Img"></p>
<h3 id="Istio"><a href="#Istio" class="headerlink" title="*Istio"></a>*Istio</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151844.png" alt="Img"></p>
<h3 id="监控和告警"><a href="#监控和告警" class="headerlink" title="监控和告警"></a>监控和告警</h3><p><a href="https://ranchermanager.docs.rancher.com/zh/integrations-in-rancher/monitoring-and-alerting">https://ranchermanager.docs.rancher.com/zh/integrations-in-rancher/monitoring-and-alerting</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151852.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151900.png" alt="Img"></p>
<h1 id="基于Rancher-来安装部署k8s的ingress控制器-NGINX-Ingress-Controller"><a href="#基于Rancher-来安装部署k8s的ingress控制器-NGINX-Ingress-Controller" class="headerlink" title="基于Rancher 来安装部署k8s的ingress控制器 NGINX Ingress Controller"></a>基于 Rancher 来安装部署 k8s 的 ingress 控制器 NGINX Ingress Controller</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>ingress 控制器有很多类型，比如常用的 nginx ingress ，HAProxy Kubernetes Ingress Controller 等，如下：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514151916.png" alt="Img"></p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>添加 ingress-nginx 的 chart 仓库：helm repo add ingress-nginx <a href="https://kubernetes.github.io/ingress-nginx">https://kubernetes.github.io/ingress-nginx</a>  </p>
<p>安装 ingress-nginx 4.12.0<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152000.png" alt="Img"></p>
<p>警告：暂时请将 kind 保持默认为 deploment  ，否则会失败，原因待排查<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152011.png" alt="Img"></p>
<p>友情提示：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152017.png" alt="Img"></p>
<p>镜像准备：（可选）<br>docker pull swr.cn-north-4.myhuaweicloud.com/ddn-k8s/registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.5.0</p>
<p>docker tag  swr.cn-north-4.myhuaweicloud.com/ddn-k8s/registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.5.0  registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.5.0</p>
<p>docker pull swr.cn-north-4.myhuaweicloud.com/ddn-k8s/registry.k8s.io/ingress-nginx/controller:v1.12.0<br>docker tag  swr.cn-north-4.myhuaweicloud.com/ddn-k8s/registry.k8s.io/ingress-nginx/controller:v1.12.0  registry.k8s.io/ingress-nginx/controller:v1.12.0</p>
<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152039.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152044.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152048.png" alt="Img"></p>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152056.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152100.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152103.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152107.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152111.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152116.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152120.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152125.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152130.png" alt="Img"></p>
<h1 id="基于Rancher来安装部署Harbor仓库"><a href="#基于Rancher来安装部署Harbor仓库" class="headerlink" title="基于Rancher来安装部署Harbor仓库"></a>基于 Rancher 来安装部署 Harbor 仓库</h1><h2 id="部署NFS服务器用作k8s的外部持久化存储卷"><a href="#部署NFS服务器用作k8s的外部持久化存储卷" class="headerlink" title="部署NFS服务器用作k8s的外部持久化存储卷"></a>部署 NFS 服务器用作 k8s 的外部持久化存储卷</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152141.png" alt="Img"></p>
<h2 id="基于rancher-部署好PV-PVC持久卷"><a href="#基于rancher-部署好PV-PVC持久卷" class="headerlink" title="基于rancher 部署好PV/PVC持久卷"></a>基于 rancher 部署好 PV/PVC 持久卷</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152145.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152150.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152153.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152157.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152201.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152204.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152208.png" alt="Img"></p>
<h2 id="添加harbor仓库"><a href="#添加harbor仓库" class="headerlink" title="添加harbor仓库"></a>添加 harbor 仓库</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152217.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152228.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152231.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152234.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152238.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152241.png" alt="Img"></p>
<h2 id="自定义value的yaml-配置文件（NodePort服务）"><a href="#自定义value的yaml-配置文件（NodePort服务）" class="headerlink" title="自定义value的yaml 配置文件（NodePort服务）"></a>自定义 value 的 yaml 配置文件（NodePort 服务）</h2><p>请优先默认选择 ingress 方式，见下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152251.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152257.png" alt="Img"></p>
<h2 id="使用以ingress默认的方式暴露提供服务"><a href="#使用以ingress默认的方式暴露提供服务" class="headerlink" title="使用以ingress默认的方式暴露提供服务"></a>使用以 ingress 默认的方式暴露提供服务</h2><p>优先建议使用 ingress 服务的方式，前提是已经安装部署好 ingress 控制器。内容如下：（默认 exposed 的原配置即可，啥都不用填即可）<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152304.png" alt="Img"></p>
<h2 id="访问harbor控制台"><a href="#访问harbor控制台" class="headerlink" title="访问harbor控制台"></a>访问 harbor 控制台</h2><p>ingress 服务访问方式如下：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152316.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152348.png" alt="Img"></p>
<p>nodeport 服务类访问方式如下：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152357.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152402.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152405.png" alt="Img"></p>
<h2 id="harbor的仓库使用"><a href="#harbor的仓库使用" class="headerlink" title="harbor的仓库使用"></a>harbor 的仓库使用</h2><h3 id="登录harbor仓库"><a href="#登录harbor仓库" class="headerlink" title="登录harbor仓库"></a>登录 harbor 仓库</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152417.png" alt="Img"></p>
<p>报错：docker 无法信任 harbor 的自签名证书<br>解决方法一：将 harbor 的根证书，放到客户端指定路径<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152424.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152429.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152432.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152436.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152440.png" alt="Img"></p>
<p>解决方法二：在 docker 的配置文件中可信任该域名<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152451.png" alt="Img"></p>
<h3 id="推送镜像"><a href="#推送镜像" class="headerlink" title="推送镜像"></a>推送镜像</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152500.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152504.png" alt="Img"></p>
<h3 id="漏洞扫描器"><a href="#漏洞扫描器" class="headerlink" title="漏洞扫描器"></a>漏洞扫描器</h3><p>因国外限制，需要手动导入 trivy 库文件包：百度网盘：我的网盘 &gt; K8S &gt; 薪享宏福 &gt; Kubernetes2024 版 - 软件包 &gt; harbor-trivy 包<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152510.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152522.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152525.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152529.png" alt="Img"></p>
<h1 id="基于Rancher-来安装部署Monitoring集群监控工具"><a href="#基于Rancher-来安装部署Monitoring集群监控工具" class="headerlink" title="基于Rancher 来安装部署Monitoring集群监控工具"></a>基于 Rancher 来安装部署 Monitoring 集群监控工具</h1><p>重要提示：如果 k8s 的容器引擎是 docker，请务必配置好联通 docker 仓库的加速器，podman,containd 同理，即确保你所在的 k8s 集群能访问到 Monitoring（其他应用服务同理） 里边 helm 的 chart 的 yaml 配置文件的 images 镜像，一般都是需要下载国外的容器镜像，国内一般无法直接访问，所以请配置好 docker 加速器（首选），或提前 pull 下载好所需要的 images 镜像导入到 node 工作节点上。如果是生产环境，建议部署好 Harbor 后，把生产所需要的国外才能下载的 images 镜像提前下载好上传到 Harbor 的私有仓库中，然后再 docker 的 daemon 文件中添加可信任的 harbor 私有仓库地址。<br>docker pull nginx                                // 拉取镜像<br>docker save -o nginx.tar nginx:latest              // 导出镜像到本地    //   -o out 出<br>docker load -i nginx.tar                         // 从本地导入镜像            //  -i  in   入</p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>强烈建议配置好存储类（参见下面的 nfs-client-provisioner），方便监控系统能使用持久化存储<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152556.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152559.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152603.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152606.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152610.png" alt="Img"></p>
<h2 id="完成情况"><a href="#完成情况" class="headerlink" title="完成情况"></a>完成情况</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152617.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152621.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152624.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152628.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152631.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152634.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152638.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152641.png" alt="Img"></p>
<h2 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h2><p>1，问题：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152654.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152659.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152704.png" alt="Img"><br>总结：NFS 存储卷给与的用户没有足够的权限<br>2，解决方法：<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152713.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152717.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152721.png" alt="Img"></p>
<p>3，使用 Monitoring<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152729.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152734.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152738.png" alt="Img"></p>
<h1 id="基于Rancher来安装部署存储类-nfs-client-provisioner"><a href="#基于Rancher来安装部署存储类-nfs-client-provisioner" class="headerlink" title="基于Rancher来安装部署存储类-nfs-client-provisioner"></a>基于 Rancher 来安装部署存储类 - nfs-client-provisioner</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514152752.png" alt="Img"></p>
<h2 id="参考配置"><a href="#参考配置" class="headerlink" title="参考配置"></a>参考配置</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153008.png" alt="Img"></p>
<h2 id="具体步骤"><a href="#具体步骤" class="headerlink" title="具体步骤"></a>具体步骤</h2><p>NFS 服务器安装及配置<br>注意：如果程序使用 NFS 存储类，初始化容器 init-chown-data 报错，类似 chown 权限不足时，可能就是 NFS 卷权限不足<br>需要更新权限，具体可以参考如下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153023.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153028.png" alt="Img"></p>
<p>添加 nfs-client-provisioner 仓库<br>helm repo add kubesphere <a href="https://charts.kubesphere.io/main">https://charts.kubesphere.io/main</a><br>镜像转向阿里云下载<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153037.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153048.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153051.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153055.png" alt="Img"></p>
<h2 id="部署完成"><a href="#部署完成" class="headerlink" title="部署完成"></a>部署完成</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153108.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153112.png" alt="Img"></p>
<h2 id="验证存储类"><a href="#验证存储类" class="headerlink" title="验证存储类"></a>验证存储类</h2><h3 id="先创建基于存储类的PVC"><a href="#先创建基于存储类的PVC" class="headerlink" title="先创建基于存储类的PVC"></a>先创建基于存储类的 PVC</h3><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153120.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153124.png" alt="Img"></p>
<h3 id="创建容器应用myapp"><a href="#创建容器应用myapp" class="headerlink" title="创建容器应用myapp"></a>创建容器应用 myapp</h3><p>单 pod 应用<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153131.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153135.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153138.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153147.png" alt="Img"></p>
<p>Deployment: 应用 (优选)<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153152.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153156.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153159.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153203.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153206.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153209.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153214.png" alt="Img"></p>
<h2 id="验证存储类持久性"><a href="#验证存储类持久性" class="headerlink" title="验证存储类持久性"></a>验证存储类持久性</h2><p>略</p>
<h1 id="基于Rancher来安装部署jenkins"><a href="#基于Rancher来安装部署jenkins" class="headerlink" title="基于Rancher来安装部署jenkins"></a>基于 Rancher 来安装部署 jenkins</h1><h2 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h2><p>两种方法：<br>1,jenkins 官方的基于 k8s 来安装 jenkins, 参考：<a href="https://www.jenkins.io/doc/book/installing/kubernetes/">https://www.jenkins.io/doc/book/installing/kubernetes/</a><br>2,helm 的 jenkins 的 chart 仓库，参考：<a href="https://artifacthub.io/packages/helm/jenkinsci/jenkins">https://artifacthub.io/packages/helm/jenkinsci/jenkins</a><br>优先选择方式 2，建议看 helm 的指导个性化部署<br>在此部署方式：rancher 使用 helm 应用中心 artifacthub.io 来创建 helm 仓库<br>备注：该版本是纯血英文版！！1<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153229.png" alt="Img"></p>
<p>helm repo add jenkinsci <a href="https://charts.jenkins.io/">https://charts.jenkins.io/</a><br>helm install my-jenkins jenkinsci/jenkins –version 5.8.18</p>
<h2 id="添加Chart仓库"><a href="#添加Chart仓库" class="headerlink" title="添加Chart仓库"></a>添加 Chart 仓库</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153234.png" alt="Img"></p>
<h2 id="安装jenkins"><a href="#安装jenkins" class="headerlink" title="安装jenkins"></a>安装 jenkins</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153240.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153244.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153247.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153250.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153253.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153257.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153302.png" alt="Img"></p>
<h2 id="排错-1"><a href="#排错-1" class="headerlink" title="排错"></a>排错</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153310.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153313.png" alt="Img"><br>或者到第三方的 docker 镜像站 去下载：docker.io/jenkins/jenkins:2.492.2-jdk17<br>提示：几乎所有的程序或服务都需要提前准备并配置好存储，网络等，如存储卷等，具体请查看官方配置文件指南。总结一句想要玩好 k8s 必须玩好 helm 的配置文件自然需要熟知 k8s 集群知识</p>
<h2 id="添加ingress"><a href="#添加ingress" class="headerlink" title="添加ingress"></a>添加 ingress</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153322.png" alt="Img"></p>
<h2 id="完成情况-1"><a href="#完成情况-1" class="headerlink" title="完成情况"></a>完成情况</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153329.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153334.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153339.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153342.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153345.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153348.png" alt="Img"></p>
<h2 id="访问jenkins"><a href="#访问jenkins" class="headerlink" title="访问jenkins"></a>访问 jenkins</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153356.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153402.png" alt="Img"></p>
<h2 id="设置中文"><a href="#设置中文" class="headerlink" title="设置中文"></a>设置中文</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153406.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153410.png" alt="Img"></p>
<h1 id="基于Rancher来安装部署Loki-原生日志监控"><a href="#基于Rancher来安装部署Loki-原生日志监控" class="headerlink" title="基于Rancher来安装部署Loki 原生日志监控"></a>基于 Rancher 来安装部署 Loki 原生日志监控</h1><h2 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153449.png" alt="Img"></p>
<h2 id="安装步骤-1"><a href="#安装步骤-1" class="headerlink" title="安装步骤"></a>安装步骤</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153455.png" alt="Img"><br>备注：k8s 集群的基于 docker 引擎的存储路径由默认的 /var/lib/docker/ 改为了 /data/docker/<br>其中：Docker 将镜像、容器、卷等数据存储在这个目录下<br>镜像文件通常存储在 /var/lib/docker/image<br>容器数据存储在 /var/lib/docker/containers<br>卷数据存储在 /var/lib/docker/volumes<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153516.png" alt="Img"></p>
<p>所以：luki 的 chart 的默认的 yaml 配置文件需要在原基础上添加一下内容：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">grafana</span>:</span><br><span class="line"></span><br><span class="line">  <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">persistence</span>:</span><br><span class="line"></span><br><span class="line">    <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">accessModes</span>:</span><br><span class="line"></span><br><span class="line">    - <span class="title class_">ReadWriteOnce</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">size</span>: 2Gi</span><br><span class="line"></span><br><span class="line">    <span class="attr">storageClassName</span>: nfs-client        #已创建的<span class="variable constant_">NFS</span>存储类的名称</span><br><span class="line"><span class="attr">loki</span>:</span><br><span class="line"></span><br><span class="line">  <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">persistence</span>:</span><br><span class="line"></span><br><span class="line">    <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">accessModes</span>:</span><br><span class="line"></span><br><span class="line">    - <span class="title class_">ReadWriteOnce</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">size</span>: 2Gi</span><br><span class="line"></span><br><span class="line">    <span class="attr">storageClassName</span>: nfs-client        #已创建的<span class="variable constant_">NFS</span>存储类的名称</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">promtail</span>:</span><br><span class="line"></span><br><span class="line">  <span class="attr">enabled</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">defaultVolumes</span>:</span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: run</span><br><span class="line"></span><br><span class="line">      <span class="attr">hostPath</span>:</span><br><span class="line"></span><br><span class="line">        <span class="attr">path</span>: <span class="regexp">/run/</span>promtail</span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: containers</span><br><span class="line"></span><br><span class="line">      <span class="attr">hostPath</span>:</span><br><span class="line"></span><br><span class="line">        <span class="attr">path</span>: <span class="regexp">/data/</span>docker/containers   #容器数据文件的主机路径</span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: pods</span><br><span class="line"></span><br><span class="line">      <span class="attr">hostPath</span>:</span><br><span class="line"></span><br><span class="line">        <span class="attr">path</span>: <span class="regexp">/var/</span>log/pods</span><br><span class="line"></span><br><span class="line">  <span class="attr">defaultVolumeMounts</span>:</span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: run</span><br><span class="line"></span><br><span class="line">      <span class="attr">mountPath</span>: <span class="regexp">/run/</span>promtail</span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: containers</span><br><span class="line"></span><br><span class="line">      <span class="attr">mountPath</span>: <span class="regexp">/data/</span>docker/containers    #容器数据文件的主机路径</span><br><span class="line"></span><br><span class="line">      <span class="attr">readOnly</span>: <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    - <span class="attr">name</span>: pods</span><br><span class="line"></span><br><span class="line">      <span class="attr">mountPath</span>: <span class="regexp">/var/</span>log/pods</span><br><span class="line"></span><br><span class="line">      <span class="attr">readOnly</span>: <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153539.png" alt="Img"></p>
<p>values.yaml 配置如下：</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">filebeat</span>:</span><br><span class="line"></span><br><span class="line">  <span class="attr">enabled</span>: <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">filebeatConfig</span>:</span><br><span class="line"></span><br><span class="line">    filebeat.<span class="property">yml</span>: |</span><br><span class="line"></span><br><span class="line">      # logging.<span class="property">level</span>: debug</span><br><span class="line"></span><br><span class="line">      filebeat.<span class="property">inputs</span>:</span><br><span class="line"></span><br><span class="line">      - <span class="attr">type</span>: container</span><br><span class="line"></span><br><span class="line">        <span class="attr">paths</span>:</span><br><span class="line"></span><br><span class="line">          - <span class="regexp">/var/</span>log/containers<span class="comment">/*.log</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        processors:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        - add_kubernetes_metadata:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            host: ${NODE_NAME}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            matchers:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            - logs_path:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                logs_path: "/var/log/containers/"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      output.logstash:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        hosts: ["logstash-loki:5044"]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">fluent-bit:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">grafana:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  persistence:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    accessModes:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - ReadWriteOnce</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    size: 2Gi</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    storageClassName: nfs-client</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  image:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    tag: 10.3.3</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  sidecar:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    datasources:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      label: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      labelValue: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      maxLines: 1000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">logstash:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  filters:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    main: |-</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      filter {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        if [kubernetes] {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          mutate {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            add_field =&gt; {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">              "container_name" =&gt; "%{[kubernetes][container][name]}"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">              "namespace" =&gt; "%{[kubernetes][namespace]}"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">              "pod" =&gt; "%{[kubernetes][pod][name]}"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            replace =&gt; { "host" =&gt; "%{[kubernetes][node][name]}"}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        mutate {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          remove_field =&gt; ["tags"]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  image: grafana/logstash-output-loki</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  imageTag: 1.0.1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  outputs:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    main: |-</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      output {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        loki {</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          url =&gt; "http://loki:3100/loki/api/v1/push"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          #username =&gt; "test"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">          #password =&gt; "test"</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        # stdout { codec =&gt; rubydebug }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      }</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">loki:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  datasource:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    jsonData: '{}'</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    uid: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  persistence:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    accessModes:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - ReadWriteOnce</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    size: 2Gi</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    storageClassName: nfs-client</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  isDefault: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  livenessProbe:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    httpGet:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      path: /ready</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      port: http-metrics</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    initialDelaySeconds: 45</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  readinessProbe:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    httpGet:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      path: /ready</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      port: http-metrics</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    initialDelaySeconds: 45</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  url: http://{{(include "loki.serviceName" .)}}:{{ .Values.loki.service.port }}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">prometheus:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  datasource:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    jsonData: '{}'</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  isDefault: false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  url: &gt;-</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://{{ include "prometheus.fullname" .}}:{{</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    .Values.prometheus.server.service.servicePort }}{{</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    .Values.prometheus.server.prefixURL }}</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">promtail:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  config:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    clients:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - url: http://{{ .Release.Name }}:3100/loki/api/v1/push</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    logLevel: info</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    serverPort: 3101</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  defaultVolumes:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: run</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      hostPath:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        path: /run/promtail</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: containers</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      hostPath:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        path: /data/docker/containers</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: pods</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      hostPath:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        path: /var/log/pods</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  defaultVolumeMounts:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: run</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      mountPath: /run/promtail</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: containers</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      mountPath: /data/docker/containers</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      readOnly: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    - name: pods</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      mountPath: /var/log/pods</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      readOnly: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">proxy:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  http_proxy: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  https_proxy: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  no_proxy: ''</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">test_pod:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  enabled: true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  image: bats/bats:1.8.2</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  pullPolicy: IfNotPresent</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="排错-2"><a href="#排错-2" class="headerlink" title="排错"></a>排错</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153829.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153832.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153835.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153838.png" alt="Img"><br>暂未解决，待排查！！！</p>
<h1 id="基于Rancher来安装部署NeuVector-Monitor"><a href="#基于Rancher来安装部署NeuVector-Monitor" class="headerlink" title="基于Rancher来安装部署NeuVector Monitor"></a>基于 Rancher 来安装部署 NeuVector Monitor</h1><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153854.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153858.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153903.png" alt="Img"><br>报错，暂未解决！！！</p>
<h1 id="基于Rancher来安装部署istio"><a href="#基于Rancher来安装部署istio" class="headerlink" title="基于Rancher来安装部署istio"></a>基于 Rancher 来安装部署 istio</h1><p>关于：istio 文档    <a href="https://istio.ac.cn/latest/">https://istio.ac.cn/latest/</a></p>
<h2 id="docker镜像准备"><a href="#docker镜像准备" class="headerlink" title="docker镜像准备"></a>docker 镜像准备</h2><p>务必提前下载好镜像离线包（具体看自己的版本）<br>比如：rancher-istio-installer-1.21.1-rancher1<br>使用第三方服务：<br>Docker/NPM 包下载服务：<a href="https://pull.7ii.win/">https://pull.7ii.win/</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153916.png" alt="Img"></p>
<h2 id="安装部署"><a href="#安装部署" class="headerlink" title="安装部署"></a>安装部署</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153922.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153925.png" alt="Img"></p>
<h2 id="完成情况-2"><a href="#完成情况-2" class="headerlink" title="完成情况"></a>完成情况</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153932.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153935.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153939.png" alt="Img"></p>
<p>部分失败：如下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153947.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514153950.png" alt="Img"><br>原因：缺少 k8s 组件 metrics-server，安装即可，见下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154001.png" alt="Img"></p>
<h2 id="使用istio"><a href="#使用istio" class="headerlink" title="使用istio"></a>使用 istio</h2><h3 id="访问Kiali"><a href="#访问Kiali" class="headerlink" title="访问Kiali"></a>访问 Kiali</h3><h4 id="基于rancher来直接访问kiali"><a href="#基于rancher来直接访问kiali" class="headerlink" title="基于rancher来直接访问kiali"></a>基于 rancher 来直接访问 kiali</h4><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154009.png" alt="Img"></p>
<h4 id="基于ingress控制器来访问Kiali控制台"><a href="#基于ingress控制器来访问Kiali控制台" class="headerlink" title="基于ingress控制器来访问Kiali控制台"></a>基于 ingress 控制器来访问 Kiali 控制台</h4><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154015.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154018.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154025.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154029.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154033.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154036.png" alt="Img"></p>
<h1 id="基于Rancher来安装部署对象存储minio"><a href="#基于Rancher来安装部署对象存储minio" class="headerlink" title="基于Rancher来安装部署对象存储minio"></a>基于 Rancher 来安装部署对象存储 minio</h1><p>关键信息：minio 分布式对象存储，可用来做 Velero  （k8s 集群备份恢复工具）的后端存储系统</p>
<h2 id="添加chart仓库"><a href="#添加chart仓库" class="headerlink" title="添加chart仓库"></a>添加 chart 仓库</h2><p>helm repo add minio-official <a href="https://charts.min.io/">https://charts.min.io</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154050.png" alt="Img"></p>
<h2 id="安装配置values-yaml值"><a href="#安装配置values-yaml值" class="headerlink" title="安装配置values.yaml值"></a>安装配置 values.yaml 值</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154054.png" alt="Img"><br>其他默认即可</p>
<h2 id="配置访问minio的ingress"><a href="#配置访问minio的ingress" class="headerlink" title="配置访问minio的ingress"></a>配置访问 minio 的 ingress</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154100.png" alt="Img"></p>
<h2 id="访问minio控制台"><a href="#访问minio控制台" class="headerlink" title="访问minio控制台"></a>访问 minio 控制台</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154104.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154109.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154115.png" alt="Img"></p>
<h1 id="基于Rancher来安装部署metrics-server"><a href="#基于Rancher来安装部署metrics-server" class="headerlink" title="基于Rancher来安装部署metrics-server"></a>基于 Rancher 来安装部署 metrics-server</h1><h2 id="概述-4"><a href="#概述-4" class="headerlink" title="概述"></a>概述</h2><p>Metrics Server 是一个可扩展且高效的组件，它为 Kubernetes 提供容器资源指标数据，这些数据是 Kubernetes 内置自动伸缩功能（如 HPA）所依赖的关键输入。</p>
<h2 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h2><p>helm repo add metrics-server <a href="https://kubernetes-sigs.github.io/metrics-server/">https://kubernetes-sigs.github.io/metrics-server/</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154130.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154135.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154140.png" alt="Img"></p>
<h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><p><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154147.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154151.png" alt="Img"><br>报错，待排查！</p>
<h1 id="基于Rancher来安装部署JumpServer"><a href="#基于Rancher来安装部署JumpServer" class="headerlink" title="基于Rancher来安装部署JumpServer"></a>基于 Rancher 来安装部署 JumpServer</h1><p>KubernetesHelm 模式部署：<a href="https://docs.jumpserver.org/zh/v4/installation/setup_kubernetes/helm_online_install/">https://docs.jumpserver.org/zh/v4/installation/setup_kubernetes/helm_online_install/</a></p>
<h2 id="安装jumpserver"><a href="#安装jumpserver" class="headerlink" title="安装jumpserver"></a>安装 jumpserver</h2><p>helm repo add jumpserver <a href="https://jumpserver.github.io/helm-charts">https://jumpserver.github.io/helm-charts</a><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154215.png" alt="Img"></p>
<h2 id="修改values-yaml"><a href="#修改values-yaml" class="headerlink" title="修改values.yaml"></a>修改 values.yaml</h2><p>重点：<br>1，持久化存储，存储类  。<br>2，ingress<br>3，国内镜像加速仓库，如：swr.cn-south-1.myhuaweicloud.com<br>4，其他必填项：如下<br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154227.png" alt="Img"><br><img src="/./FILES/Rancher2-0-k8s-%E7%AC%94%E8%AE%B0.md/img-20250514154231.png" alt="Img"></p>
<h2 id="报错-1"><a href="#报错-1" class="headerlink" title="报错"></a>报错</h2><p>待排查！！<br>初步判断是 jumpserver 之间的服务组件之间的问题</p>
<p><em>实操以及排错是技术成长的必要条件</em></p>
]]></content>
      <categories>
        <category>系统服务</category>
      </categories>
  </entry>
  <entry>
    <title>hello-hexo</title>
    <url>/2025/04/28/hello-hexo/</url>
    <content><![CDATA[<p>当你看到这里的时候，意味着你也可以按照此文档搭建一个属于自己的博客系统，使用 next 主题将会让你事半功倍，像我一样行动起来吧！</p>
<span id="more"></span>
<h1 id="安装部署HEXO"><a href="#安装部署HEXO" class="headerlink" title="安装部署HEXO"></a>安装部署 HEXO</h1><p>以下是在 Windows 系统上安装和配置 Hexo 以部署到 GitHub Pages 的详细步骤：<br>备注：提交代码到 github 需要打通本地的 blog 服务器 翻墙（比心云）</p>
<h2 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h2><p>1. 下载 Node.js</p>
<ul>
<li>打开 Node.js 官方网站：<br><a href="https://nodejs.org/">https://nodejs.org/</a></li>
<li> 点击 “Download” 按钮，选择适合 Windows 系统的 LTS（长期支持）版本进行下载。<br>2. 安装 Node.js</li>
<li> 双击下载好的安装包，运行安装向导。</li>
<li>一直点击 “下一步” 按钮，使用默认安装选项即可。</li>
<li>安装完成后，打开命令提示符（Win + R，输入<br>cmd，按回车），输入以下命令验证安装<br>node -v<br>npm -v<br>如果显示了 Node.js 和 npm 的版本号，说明安装成功。</li>
</ul>
<h2 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h2><p>1. 下载 Git</p>
<ul>
<li>打开 Git 官方网站：<br><a href="https://git-scm.com/">https://git-scm.com/</a></li>
<li> 点击 “Download” 按钮，选择适合 Windows 系统的版本进行下载。<br>2. 安装 Git</li>
<li> 双击下载好的安装包，运行安装向导。</li>
<li>在安装过程中，选择 “Use Git from the command line and also from 3rd-party software”，然后一直点击 “下一步” 按钮，使用默认安装选项即可。</li>
<li>安装完成后，再次打开命令提示符，输入以下命令验证安装</li>
</ul>
<p>git –version<br>如果显示了 Git 的版本号，说明安装成功。<br>3. 配置 Git</p>
<ul>
<li>配置你的 GitHub 用户名和邮箱（确保与你的 GitHub 账号一致）</li>
</ul>
<p>git config –global user.name “fxxxxxx”<br>git config –global user.email “<a href="mailto:xxxxxxxx@qq.com">xxxxxxxx@qq.com</a>“</p>
<ul>
<li>生成 SSH 密钥（用于免密登录 GitHub）：bash</li>
</ul>
<p>ssh-keygen -t ed25519 -C “<a href="mailto:xxxxxxxx@qq.com">xxxxxxxx@qq.com</a>“<br>按提示操作，可直接回车使用默认文件路径。然后将生成的公钥（<br>id_ed25519.pub 文件内容）添加到 GitHub 账号的 SSH 密钥列表中</p>
<p>clip &lt; ~/.ssh/id_ed25519.pub<br>打开 GitHub 账号设置的 SSH 密钥页面，点击 “New SSH key”，粘贴公钥内容并保存。</p>
<h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p><a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a><br>1. 创建 Hexo 项目文件夹</p>
<ul>
<li>打开文件资源管理器，在合适的位置创建一个文件夹，例如<br>D:\MyBlog，用于存放 Hexo 项目。<br>2. 初始化 Hexo 项目</li>
<li>打开命令提示符，切换到刚才创建的文件夹目录（例如<br>D:\MyBlog）<br>cd D:\MyBlog<br>执行以下命令初始化 Hexo 项目<br>npm install -g hexo-cli<br>hexo init blog<br>其中<br>blog 是项目名称，你可以根据自己的喜好修改。这会在当前目录下生成一个名为<br>blog 的文件夹，里面包含了 Hexo 项目的基本结构。<br>3. 安装 Hexo 项目依赖</li>
<li>进入<br>blog 项目目录<br>cd blog<br>执行以下命令安装项目依赖<br>npm install<br>4. 配置 Hexo 项目</li>
<li>打开<br>blog 项目根目录下的<br>_config.yml 文件，使用文本编辑器（如记事本、VS Code 等）进行编辑。</li>
<li>根据自己的需求修改网站标题、描述、作者等基本信息，例如：yaml<br>title: 我的个人网站<br>subtitle: 这是我的个人博客<br>description: 分享我的生活和学习<br>author: 方 XX</li>
<li> 修改网站的 URL 为你的 GitHub Pages 仓库地址：yaml<br>url: <a href="https://fangxinzhen.github.io/">https://fangxinzhen.github.io</a></li>
<li> 配置部署相关信息，在<br>_config.yml 文件中找到<br>deploy 字段，修改为：yaml</li>
</ul>
<p>deploy:<br>  type: git<br>  repo: <a href="mailto:git@github.com">git@github.com</a>:fangxinzhen/fangxinzhen.github.io.git<br>  branch: main</p>
<p>其中<br>repo 的值为你的 GitHub 仓库的 SSH 地址。<br>5. 安装 Hexo 部署插件</p>
<ul>
<li>在<br>blog 项目目录下，执行以下命令安装用于部署的 Git 插件：bash</li>
</ul>
<p>npm install hexo-deployer-git –save</p>
<h2 id="创建-GitHub-仓库"><a href="#创建-GitHub-仓库" class="headerlink" title="创建 GitHub 仓库"></a>创建 GitHub 仓库</h2><p>1. 登录 GitHub</p>
<ul>
<li>打开 GitHub 官网：<br><a href="https://github.com,并登录你的账号./">https://github.com，并登录你的账号。</a><br>2. 创建新仓库</li>
<li>点击页面右上角的 “+” 号，选择 “New repository”（新建仓库）。</li>
<li>在 “Repository name”（仓库名称）中输入<br>fangxinzhen.github.io。</li>
<li>选择 “Public”（公开），并勾选 “Initialize this repository with a README”（用 README 初始化此仓库）。</li>
<li>点击 “Create repository”（创建仓库）按钮。</li>
</ul>
<h2 id="生成并部署网站"><a href="#生成并部署网站" class="headerlink" title="生成并部署网站"></a>生成并部署网站</h2><p>1. 生成静态文件<br>在 blog 项目目录下，执行以下命令生成静态文件<br>hexo generate<br>2. 部署到 GitHub Pages</p>
<ul>
<li>执行以下命令将生成的静态文件部署到 GitHub 仓库<br>hexo deploy</li>
</ul>
<h2 id="配置-GitHub-Pages"><a href="#配置-GitHub-Pages" class="headerlink" title="配置 GitHub Pages"></a>配置 GitHub Pages</h2><p>1. 进入仓库设置</p>
<ul>
<li>在 GitHub 上找到你的<br>fangxinzhen.github.io 仓库，点击 “Settings”（设置）。<br>2. 设置 GitHub Pages</li>
<li> 在左侧菜单中找到 “Pages” 选项并点击。</li>
<li>在 “Source”（源）部分，选择 “Branch: main / Root: /”（分支：main / 根目录：/）。</li>
<li>点击 “Save”（保存）按钮。</li>
</ul>
<h2 id="查看网站"><a href="#查看网站" class="headerlink" title="查看网站"></a>查看网站</h2><p>完成上述步骤后，稍等片刻，你的个人网站就可以通过以下地址访问<br><a href="https://fangxinzhen.github.io/">https://fangxinzhen.github.io</a></p>
<h2 id="更新网站内容"><a href="#更新网站内容" class="headerlink" title="更新网站内容"></a>更新网站内容</h2><p>当你需要更新网站内容时，只需在 blog 项目目录下进行以下操作：<br>1. 修改或添加文章、页面等内容。<br>2. 生成静态文件：bash</p>
<p>hexo generate<br>3. 部署到 GitHub Pages：bash</p>
<p>hexo deploy</p>
<h2 id="成功部署到github中"><a href="#成功部署到github中" class="headerlink" title="成功部署到github中"></a>成功部署到 github 中</h2><p><a href="https://fangxinzhen.github.io/">https://fangxinzhen.github.io/</a><br><img src="/./FILES/hello-hexo.md/img-20250513151151.png" alt="Img"></p>
<h1 id="使用NEXT主题"><a href="#使用NEXT主题" class="headerlink" title="使用NEXT主题"></a>使用 NEXT 主题</h1><p>官方指南：<a href="https://theme-next.js.org/mist/docs/getting-started/">https://theme-next.js.org/mist/docs/getting-started/</a></p>
<h2 id="安装NEXT主题"><a href="#安装NEXT主题" class="headerlink" title="安装NEXT主题"></a>安装 NEXT 主题</h2><p><img src="/./FILES/hello-hexo.md/img-20250513151236.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151240.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151244.png" alt="Img"></p>
<h2 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h2><p><img src="/./FILES/hello-hexo.md/img-20250513151327.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151330.png" alt="Img"><br><em>git ls-remote -h <a href="mailto:git@github.com">git@github.com</a>:fangxinzhen/fangxinzhen.github.io.git</em><br><img src="/./FILES/hello-hexo.md/img-20250513151344.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151347.png" alt="Img"></p>
<h2 id="插入图片问题"><a href="#插入图片问题" class="headerlink" title="插入图片问题"></a>插入图片问题</h2><p>关于使用 Yan note 工具编辑 makedown 文件，插入图片失效的问题，使其相对路径作为<br><img src="/./FILES/hello-hexo.md/img-20250513151437.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151441.png" alt="Img"></p>
<h2 id="网站访问人数计数"><a href="#网站访问人数计数" class="headerlink" title="网站访问人数计数"></a>网站访问人数计数</h2><p>LeanCloud（中国）<br>为 NexT 主题添加文章阅读次数计数。记录如何设置计数器并安全运行<br><img src="/./FILES/hello-hexo.md/img-20250513151531.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151551.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151651.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151658.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151702.png" alt="Img"></p>
<h2 id="git推送到github问题"><a href="#git推送到github问题" class="headerlink" title="git推送到github问题"></a>git 推送到 github 问题</h2><p>1，先检查本地到 github 网站自己的仓库网络是否可达（先翻墙再做）<br>git ls-remote -h <a href="mailto:git@github.com">git@github.com</a>:fangxinzhen/fangxinzhen.github.io.git<br>2，开始推送<br>hexo deploy</p>
<h2 id="评论系统-畅言云评"><a href="#评论系统-畅言云评" class="headerlink" title="评论系统-畅言云评"></a>评论系统 - 畅言云评</h2><p><img src="/./FILES/hello-hexo.md/img-20250513151747.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151751.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151810.png" alt="Img"><br><img src="/./FILES/hello-hexo.md/img-20250513151813.png" alt="Img"></p>
]]></content>
  </entry>
  <entry>
    <title>vSphere Server 笔记</title>
    <url>/2025/05/13/vSphere-Server%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>此篇笔记是工作实战部署记录，从 ESXI 到 VC 的安装及配置以及注意事项，末尾也会分享软件包和 PJ 工具以及官方技术文档<br><em>百度网盘资源分享见篇尾</em></p>
<span id="more"></span>
<h1 id="ESXI"><a href="#ESXI" class="headerlink" title="ESXI"></a>ESXI</h1><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>硬件平台：IBM 3650 M4 , 内存 64G  SAS 硬盘 800G;<br>               IBM 3650 M4 , 内存 64G  SAS 硬盘 1.5T;<br>软件部署：VMware ESXI 7.0 （VMware vSphere 7 Enterprise Plus）<br>  VMware ESXI 7.0 密钥，及 VCSA7.0 密钥激活工具（见网盘）</p>
<h2 id="安装虚拟化VMware-ESXI-7-0操作系统"><a href="#安装虚拟化VMware-ESXI-7-0操作系统" class="headerlink" title="安装虚拟化VMware ESXI 7.0操作系统"></a>安装虚拟化 VMware ESXI 7.0 操作系统</h2><p>1, 配置磁盘阵列 RAID , 选择 RAID 5 （三块盘以上）， 注：不能在 UEFI 模式下安装 ESXI 系统。<br>2，制作 ESXI 7.0 的光盘或 U 盘启动。<br>3，安装步骤有四个如下：输入 root 管理员密码（需要记住此密码）；配置管理网络；选择网络适配器；配置静态 IPv4；配置 DNS；测试管理网络；<br>如：<br>ESXI 01 IP:192.168.2.163<br>ESXI 01 IP:192.168.2.164<br>建议物理机节点和虚拟机节点 IP 段分开<br>注意事项：如果出现网络测试不通的情况。第一检查服务器硬件网卡 NIC 是否开启；第二选择 ESXI 控制面板的网络适配器，检查是否选中物理网线连接的 NIC 网卡及连通状态；若还是 failed 则检查网线连接的交换机是否正常（例如用笔记本来与服务器网线直连测试）。<br>CD-ROM 安装 ESXI7.0 步骤省略</p>
<h2 id="登录VMware-ESXI管理平台，检查基本参数信息和激活ESXI"><a href="#登录VMware-ESXI管理平台，检查基本参数信息和激活ESXI" class="headerlink" title="登录VMware ESXI管理平台，检查基本参数信息和激活ESXI"></a>登录 VMware ESXI 管理平台，检查基本参数信息和激活 ESXI</h2><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164152.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164155.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164158.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164201.png" alt="Img"></p>
<h2 id="使用VMware-vSphere-Client-临时-来管理ESXI节点"><a href="#使用VMware-vSphere-Client-临时-来管理ESXI节点" class="headerlink" title="使用VMware vSphere Client (临时)来管理ESXI节点"></a>使用 VMware vSphere Client (临时) 来管理 ESXI 节点</h2><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164222.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164225.png" alt="Img"><br><em>备注：ESXI 7.0 不支持 vsphere client 远程控制 (ESXI 6.0 可以)，所以建议在 ESXI 网页上操作，先安装 Windows server 虚拟机，然后在里边引导安装 Vmware vSphere vCenter 来控制 ESXI 节点。</em><br>也可以通过 Vmware WorkStation 来简便快捷管理 ESXI 物理节点和虚拟机节点，步骤如下：<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164251.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164254.png" alt="Img"></p>
<h2 id="安装虚拟机"><a href="#安装虚拟机" class="headerlink" title="安装虚拟机"></a>安装虚拟机</h2><p>Windows 安装步骤：<br>采用 CD 光盘镜像安装<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164317.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164320.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164323.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164326.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164329.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164332.png" alt="Img"><br><em>上传 IOS 镜像安装操作系统（推荐这个方式安装）：</em><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164348.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164351.png" alt="Img"><br>其它步骤同上。<br>Linux 安装步骤：<br>xxxxx</p>
<h2 id="ESXI服务器关机步骤"><a href="#ESXI服务器关机步骤" class="headerlink" title="ESXI服务器关机步骤"></a>ESXI 服务器关机步骤</h2><p>先将 ESXI 服务器内的虚拟机关机，然后开启 ESXI 的维护模式，再正常关机。<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164428.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164431.png" alt="Img"></p>
<h1 id="VMware-vCenter-Server"><a href="#VMware-vCenter-Server" class="headerlink" title="VMware vCenter Server"></a>VMware vCenter Server</h1><h2 id="安装VCSA-有DNS部署方法"><a href="#安装VCSA-有DNS部署方法" class="headerlink" title="安装VCSA 有DNS部署方法"></a>安装 VCSA 有 DNS 部署方法</h2><p>1、安装 vCenter Server 前需要在 ESXI 节点上准备一个 Windows server 虚机平台<br>2、选择一台 Windows server 虚机（或外部物理服务器）预先配置好 vCenter Server 的 FQDN 域名服务，优先使用虚机部署 DNS<br>3,   如果是同一个网段局域网可不用域名解析，直接使用 IP 来部署 VCSA (能用域名就用域名)<br>规划 IP 及域名等名称<br>FQDN : vcsa7.vsphere.com<br>IP： 192.168.2.210<br>浏览器地址：<a href="https://vcsa7.vsphere.com:5480或https://192.168.2.210">https://vcsa7.vsphere.com:5480 或 https://192.168.2.210</a><br>SSO  登录：<br>账号：<a href="mailto:administrator@vsphere.local">administrator@vsphere.local</a><br>密码：Vcsa2023!!!</p>
<p>先按步骤八配置好 DNS 服务器，再步骤七<br>备注：<br>vCenter Server Appliance (VCSA) 和 vcenter (VC) 区别为：系统不同、虚拟化环境不同、部署不同。</p>
<p>一、系统不同</p>
<p>1、vCenter Server Appliance：vCenter Server Appliance 基于嵌入式 linux 系统。</p>
<p>2、vcenter：vcenter 基于 Windows 系统。</p>
<p>二、虚拟化环境不同</p>
<p>1、vCenter Server Appliance：vCenter Server Appliance 应用于较小的虚拟化环境，主机小于 50 台，虚拟机少于 1000 个。</p>
<p>2、vcenter：vcenter 应用于较大的虚拟化环境，主机大于 50 台，虚拟机多于 1000 个。<br>三、部署不同</p>
<p>1、vCenter Server Appliance：vCenter Server Appliance 需要安装” 客户端集成插件” 并执行光盘中的 vcsa-setup.html，以 HTML 的方式部署。</p>
<p>2、vcenter：vcenter 支持使用 vSphere Client 或 vSphere Web Client 部署<br>总结一句话：VCSA 和 VC 都差不多</p>
<p>1、下载并制作 VMware vCenter Server （VC 或 VCSA）的光盘镜像（或 ISO 安装包）。插入 ESXI 服务器光盘驱动中。上传 ESXI 文件夹中（先确保配置好域名解析服务 FQND , 见步骤八）<br>以下使用的是 VCSA 7.0 安装过程步骤：（其它版本的同理）<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164554.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164557.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164601.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164604.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164607.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164610.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164614.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164617.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164619.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164623.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164629.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164633.png" alt="Img"><br><em>大约等待 60 分钟左右，已成功！！！！！</em><br><strong>开始登录 VC！！！</strong></p>
<h2 id="登录VC"><a href="#登录VC" class="headerlink" title="登录VC"></a>登录 VC</h2><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164701.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164808.png" alt="Img"></p>
<h3 id="esxi访问"><a href="#esxi访问" class="headerlink" title="esxi访问"></a>esxi 访问</h3><p>https://esxi 的 IP /ui/、<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165409.png" alt="Img"></p>
<h3 id="VC访问"><a href="#VC访问" class="headerlink" title="VC访问"></a>VC 访问</h3><p>vCenter Client（默认端口是 443，如果修改了则添加自己修改后的端口访问）<br>https:// IP /<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165447.png" alt="Img"></p>
<h3 id="VC设备后台"><a href="#VC设备后台" class="headerlink" title="VC设备后台"></a>VC 设备后台</h3><p>vCenter Server Appliance 设备后台管理（设备管理端口是 5480）<br><a href="https://vcsa的ip:5480/">https://vcsa 的 IP:5480/</a><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165521.png" alt="Img"></p>
<p><em>注：此前首次安装 VCSA 发生意外报错：</em><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164821.png" alt="Img"><br>原因：VCSA 安装失败！原因是主机名 localhost 未被解析到 IP，未作 DNS。参考如下<br>参见：<a href="https://blog.51cto.com/u_3701740/2521875">https://blog.51cto.com/u_3701740/2521875</a><br>          <a href="https://blog.csdn.net/z136370204/article/details/109098506">https://blog.csdn.net/z136370204/article/details/109098506</a><br>          <a href="https://www.miaodongla.com/dongbaike/8913.html">https://www.miaodongla.com/dongbaike/8913.html</a></p>
<h2 id="VCSA-无DNS部署方法"><a href="#VCSA-无DNS部署方法" class="headerlink" title="VCSA   无DNS部署方法"></a>VCSA   无 DNS 部署方法</h2><p>1，前面正常安装，DNS 和 FQDN 也是写本机 IP，注意如果没有 DNS 服务器，请填写 VCSA 虚拟机 IP，不要随意填写网关或其他 IP，因为填写的 IP 不能解析第二阶段会报错导致部署失败。<br> 2，完成第 1 阶段部署，重点来了，不要直接点击 “继续”.<br>VCSA 7.0 版本系统名称使用默认 localhost ，之前 VCSA 6.7（系统名称使用默认 photon-machine）修改的方式在 VCSA 7 中不适用，需要在 VCSA 7 虚拟机下进行修改操作。VCSA 系统修改本地解析域名，<br>步骤如下：<br>       登录 VCSA 7 虚拟机，打开布署好的 VCSA 服务器控制台，按 ALT+F2 进入命令行模式，输入 shell<br>       进入命令行模式<br>       shell<br>       cat /etc/hosts   // 看到主机解析并没有对应的 IP 地址<br>       vi /etc/hosts    // 编辑<br>       192.168.2.210  localhost  // 增加 IP 地址。<br>3, 修改完后再继续第二阶段的安装<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164939.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164944.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164947.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164950.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164954.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513164959.png" alt="Img"></p>
<p><strong>总结一句话：正式环境中需要部署 VMware vCenter Server 前 需要预搭建并配置好 DNS 服务器，保证对 ESXI 以及 VC  或 VCSA 做 DNS 完全限定域名解析（FQDN），测试环境可以不做 DNS。</strong></p>
<h2 id="DNS域名服务器搭建并给ESXI节点和vCenter-Server-配置FQDN"><a href="#DNS域名服务器搭建并给ESXI节点和vCenter-Server-配置FQDN" class="headerlink" title="DNS域名服务器搭建并给ESXI节点和vCenter Server 配置FQDN"></a>DNS 域名服务器搭建并给 ESXI 节点和 vCenter Server 配置 FQDN</h2><p>解决办法：先用 ESXI 的一台虚机 （或外部的一台物理服务器）做 DNS 服务器，充当 ESXI 节点和 VCSA 的 IP 域名解析。（优先建议用虚拟机安装 DNS 域名服务，刚开始的那第一台虚拟机最适用）<br>以下是以一台外部物理服务器搭建 DNS 为例。DNS ：192.168.2.123<br>步骤如下：<br>1、部署 DNS 服务器角色与功能<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165044.png" alt="Img"></p>
<p>2、创建正向和反向的解析区域<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165053.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165056.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165100.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165104.png" alt="Img"></p>
<p>3、新建（正反向）主机解析<br>ESXI 节点和本地 DNS 服务器的域名解析<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165114.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165136.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165140.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165143.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165147.png" alt="Img"></p>
<p>4、预配置 Vcenter server 的 FQDN<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165200.png" alt="Img"></p>
<p>5、配置 ESXI 节点的主机名以及指定 DNS<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165212.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165216.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165219.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165223.png" alt="Img"></p>
<h2 id="激活VC"><a href="#激活VC" class="headerlink" title="激活VC"></a>激活 VC</h2><p>激活工具激活（见网盘）</p>
<h2 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h2><ul>
<li>网页访问 vCenter Server 时出现 no healthy upstream 的解决方法<br>参见：<a href="https://blog.51cto.com/wangchunhai/4907250">https://blog.51cto.com/wangchunhai/4907250</a><br>报错如下：<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165610.png" alt="Img"><br>对于 “no healthy upstream” 的错误提示，可能的原因有以下几种。</li>
</ul>
<p>（1）vCenter Server 部分服务没有运行，或者运行出现错误。<br>（最常见的错误，比如非正常关机导致再次开机时部分服务未开启成功）</p>
<p>（2）vCenter Server 所设置的 DNS 服务器出现错误。</p>
<p>（3）vCenter Server 本地 hosts 文件配置错误。<br>（1）步骤：<br>登录 vCenter Server 后台管理界面（ <a href="https://vcip或域名:5480），在“服务”中查看“启动类型”为“自动”的服务的运行状况是否是“正常”，如果状态为“停止”或“运行正常，但出现警告”的，应选中对应的服务，启动已经停止的服务，或者重新启动出现警告的服务">https://vcip 或域名：5480），在 “服务” 中查看 “启动类型” 为 “自动” 的服务的运行状况是否是 “正常”，如果状态为 “停止” 或 “运行正常，但出现警告” 的，应选中对应的服务，启动已经停止的服务，或者重新启动出现警告的服务</a><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165619.png" alt="Img"><br>一般情况下，如果能登录进入服务端口为 5480 的后台管理界面，在启动或重新启动相关的服务后，vCenter Server 的管理就可以恢复正常。<br>vCenter 进入 shell 命令模式步骤<br>打开 VC 虚机的控制台，按 F2 进入后如下图 1，在里面将 BASH Shell 设置为 Enabled<br>按 ALT+F2 进入命令行模式<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165631.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165636.png" alt="Img"><br>重新引导系统重启后，在命令行界面输入 shell，OK<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165645.png" alt="Img"></p>
<h1 id="配置管理-vSphere-vCtener"><a href="#配置管理-vSphere-vCtener" class="headerlink" title="配置管理 vSphere vCtener"></a>配置管理 vSphere vCtener</h1><h2 id="初始化基础配置"><a href="#初始化基础配置" class="headerlink" title="初始化基础配置"></a>初始化基础配置</h2><h3 id="新建数据中心"><a href="#新建数据中心" class="headerlink" title="新建数据中心"></a>新建数据中心</h3><h4 id="新建集群"><a href="#新建集群" class="headerlink" title="新建集群"></a>新建集群</h4><p>使用 VM 的高级功能则需要新建集群，不使用高级功能可不建集群</p>
<h5 id="添加主机"><a href="#添加主机" class="headerlink" title="添加主机"></a>添加主机</h5><p>VCSA 所在的主机可不在其关机的状态下直接加入新建的集群，忽略告警，其它主机请先进入维护模式再添加主机<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513165938.png" alt="Img"></p>
<h5 id="快速入门配置"><a href="#快速入门配置" class="headerlink" title="快速入门配置"></a>快速入门配置</h5><ul>
<li>选定服务</li>
<li>维护模式</li>
<li>时间同步（生产环境建议配置 NTP 服务）</li>
<li>管理网络<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170007.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170010.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170013.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170015.png" alt="Img"></li>
</ul>
<h4 id="创建管理网络"><a href="#创建管理网络" class="headerlink" title="创建管理网络"></a>创建管理网络</h4><h5 id="新建分布式交换机"><a href="#新建分布式交换机" class="headerlink" title="新建分布式交换机"></a>新建分布式交换机</h5><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170106.png" alt="Img"></p>
<h5 id="添加主机-1"><a href="#添加主机-1" class="headerlink" title="添加主机"></a>添加主机</h5><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170132.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170136.png" alt="Img"></p>
<h5 id="新建分布式端口组"><a href="#新建分布式端口组" class="headerlink" title="新建分布式端口组"></a>新建分布式端口组</h5><p>集群环境下，建议后续所有的虚拟机业务网卡流量统一全部连接分布式端口组上<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170752.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170756.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170802.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170806.png" alt="Img"></p>
<p><strong>DSwitch 分布式交换机的理解（重点）</strong><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170828.png" alt="Img"><br><strong>DSwitch 上做 LACP 链路聚合组（重点）</strong></p>
<h5 id="创建链路聚合组"><a href="#创建链路聚合组" class="headerlink" title="创建链路聚合组"></a>创建链路聚合组</h5><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170916.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170920.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170923.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170926.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170929.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170932.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170936.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170939.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513170942.png" alt="Img"></p>
<h4 id="管理主机网络"><a href="#管理主机网络" class="headerlink" title="管理主机网络"></a>管理主机网络</h4><p>可选项，比如需要将物理适配器做 LACP 链路聚合时使用<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171008.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171013.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171016.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171019.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171023.png" alt="Img"></p>
<h4 id="创建集群存储"><a href="#创建集群存储" class="headerlink" title="创建集群存储"></a>创建集群存储</h4><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171047.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171050.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171053.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171056.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171059.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171102.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171105.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171108.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171111.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171118.png" alt="Img"></p>
<h2 id="虚拟机"><a href="#虚拟机" class="headerlink" title="虚拟机"></a>虚拟机</h2><p>略。。。。。</p>
<h3 id="虚拟机模板"><a href="#虚拟机模板" class="headerlink" title="虚拟机模板"></a>虚拟机模板</h3><p>1，转换或模板<br>直接将虚拟机转换成模板（仅在虚拟机关机下进行）<br>2，克隆为模板<br>复制虚拟机的方式产生模板，原虚拟机保留<br>3，策略和配置文件<br>虚拟机自定义规范（所谓 Windows 和 Linux 的预配置应答文件）<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171144.png" alt="Img"></p>
<p>自定义 Windows 客户机操作系统要求 Windows 客户机操作系统中已安装 Sysprep。一定要安装 vmware tools 。<br>以转换为模板方式：<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171352.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171355.png" alt="Img"><br>以模板来创建虚拟机<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171408.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171411.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171413.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171416.png" alt="Img"></p>
<p>后续自定义硬件根据需要修改。。。。。。。。</p>
<p>备注：克隆虚拟机模板前需要安装 VMware Tools 工具，那样才能确保克隆后模板可以修改自定义客户机操作系统选项，Sysprep 工具虽然内嵌入高版本的 Windows 操作系统，但如果不安装 VMware Tools 则无法使用自定义操作系统选项。那样的话后续会出现计算机名、SID 重复问题。<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171428.png" alt="Img"></p>
<h3 id="Windows自定义应答配置"><a href="#Windows自定义应答配置" class="headerlink" title="Windows自定义应答配置"></a>Windows 自定义应答配置</h3><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171159.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171202.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171205.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171208.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171213.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171217.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171220.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171223.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171226.png" alt="Img"></p>
<h3 id="Linux自定义配置应答"><a href="#Linux自定义配置应答" class="headerlink" title="Linux自定义配置应答"></a>Linux 自定义配置应答</h3><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171302.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171305.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171308.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171311.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171314.png" alt="Img"></p>
<p><em>注意：建议创建虚拟机模板前将虚拟机上挂载的 CD 盘卸载掉，避免出现以下非必要的警告</em></p>
<h3 id="虚拟机常用操作"><a href="#虚拟机常用操作" class="headerlink" title="虚拟机常用操作"></a>虚拟机常用操作</h3><h4 id="启用热插拔"><a href="#启用热插拔" class="headerlink" title="启用热插拔"></a>启用热插拔</h4><p>注意：<br>虚拟机的 CPU 和内存默认情况下是未开启热插拔状态。<br>虚拟机如果需要开启 FT 高级容错功能则不能开启热插拔<br>根据实际需要建议创建虚拟机前开启热插拔或关闭虚拟机后手动开启热插拔选项。<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171618.png" alt="Img"></p>
<h4 id="添加虚拟机到原始存储（LUN）的映射（RDM）"><a href="#添加虚拟机到原始存储（LUN）的映射（RDM）" class="headerlink" title="添加虚拟机到原始存储（LUN）的映射（RDM）"></a>添加虚拟机到原始存储（LUN）的映射（RDM）</h4><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171626.png" alt="Img"><br>注：对象存储必须是 LUN 类型的共享存储，如：SCSI ,FC 等类型的存储对象<br>以下以连接 Windows 服务器搭建的 iSCSI 存储为例：<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171635.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171639.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171644.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171648.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171651.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171654.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171659.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171704.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171709.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171735.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171738.png" alt="Img"><br><em>以上操作未成功，原因是 iSCSI 目标服务器的存储接口是 SATA，而非 SCIS 存储类型，无法建立连接。</em></p>
<h2 id="VCSA虚机系统备份与还原"><a href="#VCSA虚机系统备份与还原" class="headerlink" title="VCSA虚机系统备份与还原"></a>VCSA 虚机系统备份与还原</h2><p>（备份目标：VM 虚拟平台外的其它服务器）<br>NFS 服务器做备份目标，端口 2049<br>备份<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171927.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171931.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171935.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171938.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171943.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513171947.png" alt="Img"></p>
<h1 id="vSphere-高级功能应用阶段"><a href="#vSphere-高级功能应用阶段" class="headerlink" title="vSphere 高级功能应用阶段"></a>vSphere 高级功能应用阶段</h1><h2 id="vMotion（热迁移）"><a href="#vMotion（热迁移）" class="headerlink" title="vMotion（热迁移）"></a>vMotion（热迁移）</h2><p>先决条件：<br>分布式虚拟交换机<br>VMkernel 适配器网络配置（静态或动态 IP，具体视实际场景）<br>vMotion 服务已开启<br>网络可达<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172018.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172020.png" alt="Img"></p>
<p><em>第一次测试热迁移虚拟机出现报错：</em><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172035.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172040.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172044.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172047.png" alt="Img"><br>解决方法：检查物理服务器 ESXI 主机上的网卡或者线路是否正常可用<br>开始迁移：<br>以计算与存储均迁移为例<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172101.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172104.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172107.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172110.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172113.png" alt="Img"></p>
<p>完成！</p>
<h2 id="VC集成域认证登录"><a href="#VC集成域认证登录" class="headerlink" title="VC集成域认证登录"></a>VC 集成域认证登录</h2><p>重点，如何去活动目录服务器（ldap AD）查找标识源名，    distinguishedName 标识名<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172130.png" alt="Img"><br>添加活动目录到 vCenter Server<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172219.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172223.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172226.png" alt="Img"><br>随时同步 LDAP 数据库信息（新建麻子，maz）<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172235.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172238.png" alt="Img"><br>找到对应的管理员组并将域内账户加入其中。<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172246.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172249.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172253.png" alt="Img"></p>
<h2 id="HA"><a href="#HA" class="headerlink" title="HA"></a>HA</h2><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172342.png" alt="Img"><br><em>检查 VMKernel 管理网络配置是否正常，以及对应的服务是否启用</em><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172353.png" alt="Img"><br>!!!!!<br>原因是集群上不存在 SAN 存储设备，比如:iSCSI、光纤通道存储等 SAN 存储<br>故此 FT，HA，DRS 等高级功能使用不了<br>!!!!</p>
<h2 id="DRS-分布式资源调度"><a href="#DRS-分布式资源调度" class="headerlink" title="DRS(分布式资源调度)"></a>DRS (分布式资源调度)</h2><p>。。。。</p>
<h2 id="FT（容错）"><a href="#FT（容错）" class="headerlink" title="FT（容错）"></a>FT（容错）</h2><p>注意：开启 FT，要求虚拟机不能开启热插拔<br>。。。。</p>
<h2 id="VDP-备份恢复虚拟机"><a href="#VDP-备份恢复虚拟机" class="headerlink" title="VDP(备份恢复虚拟机)"></a>VDP (备份恢复虚拟机)</h2><p>先决条件：<br>提前下载好 VDP 的 OVF 模板至本地<br>注：提前做 VDP 的 DNS 域名解析（否则会报错，见下）<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172457.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172500.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172503.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172506.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172509.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172512.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172515.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172519.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172522.png" alt="Img"></p>
<p>给 VDP 虚机按照 VM tools 工具，然后重启下<br>默认账号密码：root /changeme<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172532.png" alt="Img"><br><em>报错分析：未对 VDP 做 DNS 域名解析，因为部署 VDP 过程会使用到 DNS。</em><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172547.png" alt="Img"><br>重新部署 VDP 模板虚机<br>完后还是还是上面的报错，故此怀疑是本地 OVF 模板的问题可能，具体待定。。。。。</p>
<h1 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="主机USB与USB控制器区别"><a href="#主机USB与USB控制器区别" class="headerlink" title="主机USB与USB控制器区别"></a>主机 USB 与 USB 控制器区别</h2><p>注：虚拟机上添加 “主机 USB 设备” 前必须保证其所在的 ESXI 主机上插入了 USB 设备，否则提示 “无任何可用设备”<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172843.png" alt="Img"></p>
<h2 id="上传镜像到-Vsphere中心失败，解决方法"><a href="#上传镜像到-Vsphere中心失败，解决方法" class="headerlink" title="上传镜像到 Vsphere中心失败，解决方法"></a>上传镜像到 Vsphere 中心失败，解决方法</h2><p><strong>换 360 浏览器</strong><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513172904.png" alt="Img"></p>
<h2 id="Esxi主机内存扩容"><a href="#Esxi主机内存扩容" class="headerlink" title="Esxi主机内存扩容"></a>Esxi 主机内存扩容</h2><p>虚拟化平台：<br>三台 ESXI 主机 + 两台存储<br>一台戴尔服务器，两台联想服务器，两台联想存储，光纤 FC 通道连接</p>
<p>准备步骤：<br>1，上面所有的虚拟机正常关机<br>2，访问将 VCSA 或 VC 所在的 ESXI 主机上，将 VCSA 或 VC 虚拟机关机（注意：请一定要在 ESXI 主机上 先将 VCSA 关机，然后再 ESXI 主机关机）<br>3，主机进入维护模式前，如果开启了  HA 和 DRS 高级功能  ，请务必将其停用后   。再将所有的 Esxi 主机进入维护模式，然后关机   （否则一主机进入维护模式后，其上的虚拟机将会 DRS 迁移到别的主机上，造成虚拟机资源集中化问题）<br>4，内存扩容完毕。（重点：请务必提前确保服务器上的网线，光纤等标记好端口位置，便以恢复原状）<br>5，服务器开机，esxi 开机正常并启动服务<br>6，服务各个 Esxi 主机，退出维护模式<br>7，给 VCSA 或 VC 虚拟机开机<br>8，访问 VCSA 或 VC  ，给虚拟机服务器逐个开机</p>
<h2 id="域控在虚拟化中的注意点"><a href="#域控在虚拟化中的注意点" class="headerlink" title="域控在虚拟化中的注意点"></a>域控在虚拟化中的注意点</h2><p>1，公司所有业务服务器均为虚拟机上。其中域控服务器也是，然后公司奇安信行为管理  上启用了 客户端电脑  windows 集成认证（客户端加域）     来上网认证。  故此在 ESXI 主机关机及进入维护模式期间，域控是关机停服状态  。故此当客户端电脑域账号登录后无法正常上网！<br>解决方法：行为管理提前给客户端电脑网段加白名单。或请合理安排作业时间</p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="VCSA关机和esxi进入维护模式顺序错误"><a href="#VCSA关机和esxi进入维护模式顺序错误" class="headerlink" title="VCSA关机和esxi进入维护模式顺序错误"></a>VCSA 关机和 esxi 进入维护模式顺序错误</h2><p>作业完成后虚拟机开机过程引导报错：<br>OA_DB 泛微 OA 数据库服务器虚拟机开机引导报错如下：<br>error: file /initramfs-3.10.0-1160.102.1.el7.x86_64.img’ not found.<br>/boot 系统启动文件丢失导致开机启动失败<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173138.png" alt="Img"><br>解决方法：<br><a href="https://blog.csdn.net/u011775882/article/details/115367352">https://blog.csdn.net/u011775882/article/details/115367352</a><br>适用于处理任何 /boot 目录下的文件丢失问题<br>{  故障现象</p>
<p>主机启动失败，提示 error: file ‘/initramfs-3.10.0-957.el7.x86_64.img’ not found。如下图：<br>在这里插入图片描述<br>2. 处理思路</p>
<p>光驱启动进入系统救援模式，确认 /boot 目录下 initramfs-3.10.0-957.el7.x86_64.img 文件是否存在。<br>如文件不存在，直接从步骤 8 开始执行.<br>如文件存在，则可能文件已经损坏。/boot 目录下创建 bak 子目录，mv 原文件至 bak 目录下。<br>挂载系统镜像文件（系统 iso 文件），进入软件包所处目录，通过 rpm 方式强制重装内核软件包。/boot 目录下任何文件丢失均可以使用该方法处理。<br>重装内核完成后，检查 /boot 目录下是否生成 initramfs-3.10.0-957.el7.x86_64.img。确认文件已生成，重启操作系统，故障解决。<br>略。。<br>3. 处理步骤</p>
<p>1. 挂载 iso 镜像文件，重启主机，通过光驱启动。（如不熟悉该步骤，请自行查阅文档）<br>2. 进入系统安装界面，按上下键，选择 Troubleshooting 后回车。<br>在这里插入图片描述<br>3. 选择 Rescue a Centos system 回车<br>在这里插入图片描述</p>
<p>4. 救援环境尝试挂载 linux 根文件系统到 /mnt/sysimage，选 1 回车，再回车。<br>在这里插入图片描述 5. 根据上图提示，执行 chroot /mnt/sysimage 命令，切换至根目录模式，确认 initramfs-3.10.0-957.el7.x86_64.img 文件是否存在。</p>
<p>sh 4.2#chroot /mnt/sysimage<br>bash-4.2#cd /boot<br>bash-4.2#ls -l initramfs-3.10.0-957.el7.x86_64.img</p>
<p>6. 如文件存在，需要先移动至 bak 目录。如文件不存在，跳过步骤 6.</p>
<p>bash-4.2# cd /boot<br>bash-4.2#mkdir bak<br>bash-4.2#mv initramfs-3.10.0-957.el7.x86_64.img bak</p>
<p>7. 执行 mount 命令，将光驱重新挂载至 /mnt 目录，然后切换至系统软件包所在目录，列出 kernel 相关软件包。<br>在这里插入图片描述 8. 执行 rpm 命令强制安装 kernel 软件包，此处注意–force 选项是必须的。</p>
<p>在这里插入图片描述<br>9.kernel 软件包重装完成后，查看 /boot 目录下是否有新的 initramfs 文件生成。<br>在这里插入图片描述 10. 重启主机，操作系统恢复正常。</p>
<p>在这里插入图片描述<br>本文描述的方法适用于处理任何 /boot 目录下的文件丢失问题  }</p>
<h2 id="虚拟机的网络适配器即网卡类型区别"><a href="#虚拟机的网络适配器即网卡类型区别" class="headerlink" title="虚拟机的网络适配器即网卡类型区别"></a>虚拟机的网络适配器即网卡类型区别</h2><p><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173206.png" alt="Img"></p>
<h2 id="VMware-Converte-官方P2V转换工具"><a href="#VMware-Converte-官方P2V转换工具" class="headerlink" title="VMware_Converte 官方P2V转换工具"></a>VMware_Converte 官方 P2V 转换工具</h2><p>官方工具：<a href="https://docs.vmware.com/en/vCenter-Converter-Standalone/index.html">https://docs.vmware.com/en/vCenter-Converter-Standalone/index.html</a></p>
<h2 id="关于VC的许可证添加注意事项"><a href="#关于VC的许可证添加注意事项" class="headerlink" title="关于VC的许可证添加注意事项"></a>关于 VC 的许可证添加注意事项</h2><p>在部署完 VC 后请务必第一时间（正式添加 esxi 主机，集群前）就必须把默认的评估许可证替换下来。否则请断开移除所有主机，集群，然后按以下步骤重新操作。<br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173258.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173301.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173304.png" alt="Img"><br><img src="/./FILES/vSphere-Server%E7%AC%94%E8%AE%B0.md/img-20250513173309.png" alt="Img"></p>
<h1 id="资源分享"><a href="#资源分享" class="headerlink" title="资源分享"></a>资源分享</h1><p>通过网盘分享的文件：ESXi and vCenter Server 文档<br>链接: <a href="https://pan.baidu.com/s/1FAFwt31UIDHwdgfRN3bheQ">https://pan.baidu.com/s/1FAFwt31UIDHwdgfRN3bheQ</a> 提取码: ewa5<br>通过网盘分享的文件：keygen (已破解).rar<br>链接: <a href="https://pan.baidu.com/s/1xn-UD2LtiRrHtqFmwhQ-JA">https://pan.baidu.com/s/1xn-UD2LtiRrHtqFmwhQ-JA</a> 提取码: i84i<br>通过网盘分享的文件：VMware-VCSA-all-7.0.3-22837322.iso<br>链接: <a href="https://pan.baidu.com/s/1Qpe94TN0CxrZFBs8AljeIQ">https://pan.baidu.com/s/1Qpe94TN0CxrZFBs8AljeIQ</a> 提取码: z1qs<br>通过网盘分享的文件：VMware-VMvisor-Installer-7.0U3n-21930508.x86_64.iso<br>链接: <a href="https://pan.baidu.com/s/1Zz5jHgCuSKq9R39TIMAROA">https://pan.baidu.com/s/1Zz5jHgCuSKq9R39TIMAROA</a> 提取码: unqw</p>
]]></content>
      <categories>
        <category>虚拟化</category>
      </categories>
  </entry>
  <entry>
    <title>运维笔记</title>
    <url>/2025/05/08/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<p>运维是个持久化过程，体现在知识面需要广，服务需要好，觉悟要高。还有就是日常工作如果碰到问题及怎么解决的过程最好记录下来因为这是你的真实经验，网上是学不到的。<br>人教人是教不会的，事情一教就会！<br>以下就是我的真实运维过程的 “随心摘记 “，仅供参考！嘿嘿！</p>
<span id="more"></span>
<h1 id="常用工具集"><a href="#常用工具集" class="headerlink" title="常用工具集"></a>常用工具集</h1><h2 id="优秀典藏网站集"><a href="#优秀典藏网站集" class="headerlink" title="优秀典藏网站集"></a>优秀典藏网站集</h2><p><a href="http://www.cxy521.com/">http://www.cxy521.com/</a><br><a href="https://rufus.ie/zh/">https://rufus.ie/zh/</a><br><a href="https://localsend.org/#/download">https://localsend.org/#/download</a><br><a href="http://www.wofficebox.com/">http://www.wofficebox.com/</a><br>static.f7tk.com/index.html    网页图片批量下载插件  Fatkun<br><a href="https://www.appinn.com/">https://www.appinn.com/</a>    万能软件工具网站<br><a href="https://chat18.aichatos.xyz/#/chat/1709025371275">https://chat18.aichatos.xyz/#/chat/1709025371275</a>   chatgpt 网址<br><a href="https://www.ventoy.net/cn/">https://www.ventoy.net/cn/</a>   ventoy Ventoy 是一个制作可启动 U 盘的开源工具。（精品）<br><a href="https://wis.ruijie.com.cn/wmg/static/homepager/index.htm">https://wis.ruijie.com.cn/wmg/static/homepager/index.htm</a>  手机端 WiFi 测速工具（精品）<br><a href="https://www.xshell.com/zh/free-for-home-school/">https://www.xshell.com/zh/free-for-home-school/</a>   xshell 官方免费的 xshell  和 xftp 工具下载地址<br><a href="https://yank-note.com/zh-CN">https://yank-note.com/zh-CN</a>    一款强大可扩展的 Markdown 编辑器<br><a href="https://opensource.com/">https://opensource.com/</a>  红帽前沿开源技术网站（精品）<br><a href="https://opensource.com/alternatives?utm_source=intcta">https://opensource.com/alternatives?utm_source=intcta</a>   商业产品开源替代方案<br><a href="https://opensource.com/downloads">https://opensource.com/downloads</a>   红帽前沿开源技术网站，国外级的原生技术，可免费下载文档（超级精品）<br><a href="https://veracrypt.fr/en/Home.html">https://veracrypt.fr/en/Home.html</a>  （磁盘，分区）加密存储方案<br>。。。。。。</p>
<h2 id="EVE-NG"><a href="#EVE-NG" class="headerlink" title="EVE-NG"></a>EVE-NG</h2><p>EVE-NG（Emulated Virtual Environment - Next Generation）是一款功能强大的网络仿真虚拟环境工具<br>官方：<a href="https://www.eve-ng.net/">https://www.eve-ng.net/</a><br>官方下载链接：<a href="https://customers.eve-ng.net/eve-ce-prod-6.2.0-4-full.iso">https://customers.eve-ng.net/eve-ce-prod-6.2.0-4-full.iso</a><br>百度网盘安装包和镜像下载地址：见 / 闪魔 /eve-ng，内含镜像密码（见 pdf 文件）<br>中文网：<a href="https://eve-ng.cn/doku.php?id=%E9%A6%96%E9%A1%B5">https://eve-ng.cn/doku.php?id=%E9%A6%96%E9%A1%B5</a><br>如何上传镜像到 EVE-NG 中：<a href="https://blog.csdn.net/liuhuayeyu/article/details/124082469">https://blog.csdn.net/liuhuayeyu/article/details/124082469</a>  (精品)<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170248.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170252.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170258.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170301.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170333.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508170703.jpg" alt="Img"></p>
<h2 id="Notepad"><a href="#Notepad" class="headerlink" title="Notepad++"></a>Notepad++</h2><p>工具安装包：百度网盘 &gt;  运维工具 &gt; 其他工具 &gt; Notepad++<br>插件安装包：百度网盘 &gt;  运维工具 &gt; 其他工具 &gt; plugins</p>
<h3 id="插件介绍"><a href="#插件介绍" class="headerlink" title="插件介绍"></a>插件介绍</h3><h4 id="NppFTP"><a href="#NppFTP" class="headerlink" title="NppFTP"></a>NppFTP</h4><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171845.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171848.png" alt="Img"></p>
<h4 id="Compare"><a href="#Compare" class="headerlink" title="Compare"></a>Compare</h4><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171922.png" alt="Img"></p>
<h4 id="Explorer"><a href="#Explorer" class="headerlink" title="Explorer"></a>Explorer</h4><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171933.png" alt="Img"></p>
<h4 id="NppExport"><a href="#NppExport" class="headerlink" title="NppExport"></a>NppExport</h4><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171946.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508171949.png" alt="Img"></p>
<h2 id="iVentoy工具"><a href="#iVentoy工具" class="headerlink" title="iVentoy工具"></a>iVentoy 工具</h2><p>官方手册：<a href="https://www.iventoy.com/cn/index.html">https://www.iventoy.com/cn/index.html</a></p>
<h3 id="iVentoy概述"><a href="#iVentoy概述" class="headerlink" title="iVentoy概述"></a>iVentoy 概述</h3><p>简单来说，iVentoy 可以看成是一个增强版的 PXE 服务器。 使用 iVentoy 你可以通过网络同时给多台机器启动、安装操作系统。</p>
<p>iVentoy 使用极其简单，无需复杂的配置，直接把 ISO 文件放到指定位置，客户机在启动时根据菜单选择要启动的 ISO 文件即可。<br>iVentoy 同时支持 x86 Legacy BIOS、IA32 UEFI、x86_64 UEFI 和 ARM64 UEFI 模式。<br>iVentoy 支持 110 多种常见类型的操作系统 （Windows/WinPE/Linux/VMware）</p>
<h3 id="Ventoy概述"><a href="#Ventoy概述" class="headerlink" title="Ventoy概述"></a>Ventoy 概述</h3><p>Ventoy 工具，简单来说，Ventoy 是一个制作可启动 U 盘的开源工具。<br><a href="https://www.ventoy.net/cn/">https://www.ventoy.net/cn/</a><br>（精品系统）</p>
<ul>
<li>iVentoy 服务端安装包（win）<br>略</li>
<li>使用说明</li>
</ul>
<ol>
<li>下载软件<br>根据系统版本下载 Windows 64 位、Windows 32 位或 Linux 64 位版本（不支持 Linux 32 位版本）。比如 iventoy-1.0.00-win64.zip<br>软件下载之后解压。注意：解压位置的全路径中不能有中文或空格！ 软件解压后的目录结构如下：<br>各个目录作用如下：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174329.png" alt="Img"></li>
<li>拷贝 ISO 文件<br>把 ISO 文件都拷贝到 iso 目录下，你可以在此目录下任意创建子目录来归类存放各种不同类型系统的 ISO 文件。 注意：目录名和 ISO 文件名中不能有中文或空格！</li>
</ol>
<p>这里说明一下，你不一定真的需要把 ISO 文件从别的位置拷贝到这个 iso 目录下，你也可以做软链接，比如:<br>在 Windows 系统中你可以使用 mklink 命令， 在 Linux 系统中你可以使用 ln -s 命令。</p>
<p>mklink D:\iventoy-1.0.00\iso\ubuntu-22.04.2-desktop-amd64.iso  E:\download\ubuntu-22.04.2-desktop-amd64.iso </p>
<p>ln -s /opt/download/ubuntu-22.04.2-desktop-amd64.iso  /home/panda/iventoy-1.0.00/iso/ubuntu-22.04.2-desktop-amd64.iso<br>3. 运行 iVentoy 软件<br>Windows 系统中直接双击运行 exe 文件即可。Linux 系统下在终端中执行 sudo bash iventoy.sh start 命令。</p>
<ol start="4">
<li>iVentoy 界面<br>iVentoy 的界面是基于 WEB 的，因此软件运行起来以后，需要打开浏览器访问 <a href="http://127.0.0.1:26000/">http://127.0.0.1:26000</a> 来打开 iVentoy 的软件界面。<br>你也可以从另外一台电脑上，通过 <a href="http://x.x.x.x:26000/">http://x.x.x.x:26000</a> 来访问软件界面，其中 x.x.x.x 是运行 iVentoy 的那台电脑的 IP 地址。<br>比如，运行 iVentoy 的服务器（Linux 系统）中没有图形界面环境，就可以这样通过另外一台电脑来访问。</li>
</ol>
<p>Windows 系统中打开软件之后，会自动打开浏览器，如果没有自动打开，则需要手动点击 打开链接 按钮。<br>注意：请使用新版本的 Google Chrome 或 FireFox 浏览器访问 iVentoy 界面，其他浏览器未做测试，不保证没有问题。</p>
<ol start="5">
<li>启动 PXE 服务<br>在 iVentoy 主界面上选择本机 IP 地址，设置好 IP 地址池，然后点击绿色的开始按钮即可。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174432.png" alt="Img"></li>
<li>自动启动 PXE 服务<br>Windows 版本可以执行 iVentoy_64.exe -R , Linux 版本中可以执行 sudo bash iventoy.sh -R start<br>其中 -R 选项的意思是按照上一次运行时的参数自动启动 PXE 服务。 这样就不需要再手动点击绿色的开始按钮了。<br>当然前提是之前必须手动设置完参数，启动过一次。在此之后运行时设置的参数会被保存下来，才可以使用 -R 选项。</li>
</ol>
<h3 id="iVentoy-自动安装（无人值守）"><a href="#iVentoy-自动安装（无人值守）" class="headerlink" title="iVentoy 自动安装（无人值守）"></a>iVentoy 自动安装（无人值守）</h3><p>很多操作系统都提供了无人值守、自动安装部署的方案。你只需要提供一个脚本或者模板即可。<br>比如 Windows 中的 unattend XML、Redhat/CentOS 系列中的 Kickstart 脚本、SUSE 系列中的 autoYast XML、Debian 系列中的 preseed 脚本等等。<br>正常情况下，如果你想进行自动安装，你必须重新制作一个新的 ISO 文件，在里面放入一个自动安装的脚本才可以。<br>通过 iVentoy 你无需重新制作 ISO 文件，只需要简单地为一个 ISO 文件指定一个或者多个自动安装脚本即可。 当有多个自动安装脚本时，在启动时会弹出菜单来让你选择。 你还可以随时更新这些自动安装的脚本。<br>如：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174505.png" alt="Img"></p>
<ul>
<li>支持的发行版 (更新中)<br>下面的示例脚本位于安装包内的 user/scripts/example 目录下。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174553.png" alt="Img"><br>注意，这里的示例脚本仅供参考，需要根据实际需要修改，尤其是里面磁盘分区设置的部分。否则会造成磁盘被误格式化、数据丢失等问题。</li>
<li>软件配置<br>直接在 iVentoy 界面上选择对应的 ISO 文件，设置自动安装脚本路径即可。</li>
<li>脚本变量扩展<br>在进行自动安装时，在安装脚本中有一些配置是无法固定写死的，必须根据实际环境进行调整。<br>最常见的就是对于安装盘的指定，比如我们在安装脚本中指定系统安装到 DISK0 或者 /dev/sda<br>但在有些机器上它对应的那个盘并不是我们想要的那个。 这样可能就把系统安装到错误的盘上了。<br>针对上述需求，iVentoy 在自动安装脚本中支持 变量扩展，变量使用 $$VT_XXX$$ 的形式，其中 VT_XXX 对应变量名。注意：1. 包含变量的自动安装脚本文件必须是 UTF-8 编码格式。2. 只支持下面表格中列出的变量，不支持自定义变量。2. 变量名两边必须各用 2 个 $ 符号包起来，即 $$VT_XXX$$ 的形式。3. Ventoy 会自动检测自动安装脚本内是否包含变量，对于不包含变量的脚本不会做扩展处理。4. 变量扩展是在副本中进行的，不会修改脚本源文件。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174623.png" alt="Img"><br>脚本示例：unattend.xml<br>脚本示例：kickstart.cfg<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174642.png" alt="Img"></li>
</ul>
<h3 id="iVentoy-配合第三方-DHCP-Server-说明"><a href="#iVentoy-配合第三方-DHCP-Server-说明" class="headerlink" title="iVentoy 配合第三方 DHCP Server 说明"></a>iVentoy 配合第三方 DHCP Server 说明</h3><ul>
<li><ol>
<li>背景说明<br>通过网络安装系统（PXE）流程的第一步就是客户端向服务端发送 DHCP 请求来分配一个 IP 地址。因此必须有一个 DHCP Server 的角色。<br>iVentoy 内部集成了一个 DHCP Server，简单场景下可以直接使用这个内部集成的 DHCP Server。但此时局域网内不能再有其他的 DHCP Server。<br>iVentoy 也可以不启用这个内部的 DHCP Server 而是和第三方 DHCP Server 配合工作。<br>注意：第三方 DHCP Server 必须支持 next-server 和 bootfile 这两个选项的配置。（必须配置）<br>如；华为 S7706 交换机做 DHCP SERVER 服务器，需要对所在开启了 DHCP 服务的 vlanif 或 IP pool 池中配置：</li>
</ol>
</li>
</ul>
<p> bootfile  优先选 iventoy_loader_16000_uefi  （兼容 bios 启动）<br> <img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174719.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174723.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174728.png" alt="Img"></p>
<ul>
<li><ol start="2">
<li>启动文件<br>iVentoy 配合第三方 DHCP Server 工作时，自身不再提供 DHCP Server 的功能，而是只作为文件服务器的角色提供文件下载的服务。<br>客户端进入 PXE 流程之后，首先和 DHCP Server 交互获取到 IP 地址，以及 next-server 地址 （就是 iVentoy）和 bootfile 选项的值。 然后接着就会通过 TFTP 从 next-server （iVentoy）那里下载 bootfile 文件，也就是启动文件。启动文件执行之后再加载启动菜单。这个是 PXE 启动的基本流程。<br>这里有一个不好处理的地方就是，客户端有可能是 Legacy BIOS 模式也有可能是 UEFI 模式，这个是不确定的，而 Legacy BIOS 模式和 UEFI 模式所需要的启动文件又是不一样的。<br>如果客户端是 UEFI 模式，而 iVentoy 给客户端发送了 Legacy BIOS 模式的启动文件，则客户端会直接挂死，无法启动。<br>那有没有办法判断客户端到底是 Legacy BIOS 模式还是 UEFI 模式呢（以及 IA32 UEFI 模式和 ARM64 UEFI 模式）？有办法！<br>客户端在进入 PXE 流程的时候，首先是向 DHCP Server 发送 DHCP 请求报文以获取 IP 地址，而在这个请求报文里面就携带了客户端的相关信息，其中就有客户端 BIOS 模式的信息。<br>但问题又来了，这个信息只在 DHCP 请求报文里面存在，当客户端获取完 IP 地址，通过 TFTP 来向 iVentoy 下载启动文件的时候，是不携带这些信息的，这样 iVentoy 还是无法 区分客户端到底是什么 BIOS 模式，该给它发送哪个启动文件。<br>iVentoy 针对不同的场景采用两种不同的方式来解决这个问题，分别对应两种不同的外部 DHCP Server 模式，即 External 模式和 ExternalNet 模式。</li>
</ol>
</li>
<li>2.1 External 模式<br>External 模式的使用场景是 iVentoy 和第三方的 DHCP Server 位于同一个局域网内（比如同一个 VLAN 内）。<br>在这个模式下，iVentoy 还是会启动内部的 DHCP Server，只不过它只监听 DHCP 报文，不会做出任何响应，因此它不会干扰外部 DHCP Server 的工作。<br>因为客户端发出的 DHCP 请求报文是广播形式的，第三方 DHCP Server 能接收到，iVentoy 也能接收到。（他俩在同一个 VLAN 内）。<br>同时通过监听客户端的 DHCP 报文，iVentoy 内部会记录下这个客户端的 BIOS 模式，等后面该客户端来向 iVentoy 请求下载启动文件时，iVentoy 就可以给出正确的启动文件了。<br>因此这种模式下，第三方 DHCP Server 不需要区分客户端的 BIOS 模式，只需要配置一个共同的启动文件名称（比如 iventoy_loader_16000）就可以了。<br>这个文件名其实是一个虚拟的文件名，iVentoy 会根据记录信息判断出客户端的 BIOS 模式然后发送真实的文件给客户端。</li>
<li>2.2 ExternalNet 模式<br>ExternalNet 模式的使用场景是 iVentoy 和第三方的 DHCP Server 位于不同的局域网内（比如不同的 VLAN 内）。<br>iVentoy 无法监听 DHCP 报文，因为 DHCP 报文被隔离在客户端所在的 VLAN 内，无法到达 iVentoy。<br>在这个模式下，iVentoy 就彻底不再启动内部的 DHCP Server（因为启动了也没用）。那启动文件怎么区分呢？交给第三方 DHCP Server 来完成。<br>即这种模式下第三方 DHCP Server 必须能够动态的根据客户端 DHCP 报文中的信息来告诉客户端不同的启动文件名。<br>比如，如果客户端是 Legacy BIOS 模式，则 bootfile 的值需为 iventoy_loader_16000_bios, 如果是 UEFI 模式，则 bootfile 的值需为 iventoy_loader_16000_uefi 等等。<br>因此，这种模式对于第三方 DHCP Server 的要求很高，必须能够根据 DHCP 报文的信息动态设置 bootfile 选项。<br>大部分 DHCP Server 都不支持这种高级功能（甚至一些 DHCP Server 连最基本的 next-server 和 bootfile 选项的配置都不支持）。<br>当然也有支持的，比如 Windows Server 下的 DHCP Server 以及 Linux 系统中的 dhcp server。<br>以 Linux 下的 DHCP Server 为例，可以在 /etc/dhcp/dhcpd.conf 中按照如下配置：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174747.png" alt="Img"><br>当然，特殊情况特殊对待，比如我的环境中所有的电脑都是 UEFI 模式的，那即使第三方 DHCP Server 不支持这种高级设置也没事，直接按照 UEFI 模式配置 bootfile 的值即可。</li>
<li>2.3 特殊应用<br>即使 iVentoy 和第三方 DHCP Server 位于同一个 VLAN 内，也可以使用 ExternalNet 模式，只要能满足你的要求。<br>而且这种使用方式还有一个好处，就是在 ExternalNet 模式下 iVentoy 不再启动内部的 DHCP Server，这样 iVentoy 和第三方 DHCP Server 可以运行在同一个系统内。<br>而 External 模式则不行，因为 External 模式下 iVentoy 还是会启动内部的 DHCP Server，这样两者运行在同一个系统内时会有端口号冲突。</li>
<li><ol start="3">
<li>使用方法</li>
</ol>
</li>
</ul>
<ol>
<li>在 iVentoy 的 参数配置 页面选择 DHCP 服务器模式 为 External 或者 ExternalNet<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174804.png" alt="Img"></li>
<li>第三方 DHCP Server 中配置 next-server 地址为 iVentoy 运行时选择的本机 IP 地址。</li>
<li>如果是 External 模式则 bootfile 配置为 iventoy_loader_16000<br> 注意最后的 16000 是和 iVentoy 的 HTTP 服务端口号对应的，如果你在参数配置页面修改了这个值则这里也要对应修改（比如 iventoy_loader_17000)。</li>
<li>如果是 ExternalNet 模式则则 bootfile 根据 BIOS 模式 Legacy BIOS 模式、X64 UEFI 模式、IA32 UEFI 模式、ARM64 UEFI 模式，分别配置为<br> iventoy_loader_16000_bios 或 iventoy_loader_16000_uefi 或 iventoy_loader_16000_ia32 或 iventoy_loader_16000_aa64</li>
</ol>
<h3 id="实战演练"><a href="#实战演练" class="headerlink" title="实战演练"></a>实战演练</h3><p>第三方 DHCP SERVER 配置：华为 S7706 核心交换机<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174842.png" alt="Img"><br>iVentoy 服务器部署：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174850.png" alt="Img"><br>PEX 客户端重装系统：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174857.png" alt="Img"><br>疑似不支持封装过的镜像 IOS 安装<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174906.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508174912.png" alt="Img"></p>
<h1 id="疑难杂症"><a href="#疑难杂症" class="headerlink" title="疑难杂症"></a>疑难杂症</h1><p>待续。。。</p>
<h1 id="工作随记"><a href="#工作随记" class="headerlink" title="工作随记"></a>工作随记</h1><h2 id="海康威视监控"><a href="#海康威视监控" class="headerlink" title="海康威视监控"></a>海康威视监控</h2><h3 id="基础知识篇："><a href="#基础知识篇：" class="headerlink" title="基础知识篇："></a>基础知识篇：</h3><p>网络监控主机 NVRØ  摄像机首次安装并接入到主机需要输入摄像头的用户名密码，如丢失可以下载海康威视官方 400 密码重置助手。地址<br><a href="http://www.hikvision.com/cn/wxxz.aspx?key=18%EF%BC%8C%E5%88%9D%E5%A7%8B%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%EF%BC%9Aadmin/12345">http://www.hikvision.com/cn/wxxz.aspx?key=18，初始账号密码：admin/12345</a><br>Ø  海康威视摄像机 DS 开头，萤石摄像机 CS 开头。<br>Ø  老版本的摄像机有初始默认密码，而最新的监控设备不再有出厂默认密码，而是第一次自己设置设备密码（需要记住此密码，最好统一设置）。<br>Ø  一般海康电源适配器剪断后，全黑的线是负极，黑白相间的线是正极。黑色是负极，红色是正极。<br>Ø 交流供电，电源接线不区分正负极<br>直流供电，电源接线需要注意区分正负极<br>Ø  常见供电方式有：直流供电和交流供电；<br>DC 表示设备支持直流供电<br>AC 表示设备支持交流供电<br>Ø  圆口供电口如何区分正负极？<br>接头外层为负极，内芯为正极。<br>Ø  此种接口为绿色接线端子，接头上刻有字体，如图上实物所示为：AC24V 供电。中间是公共接地口，左右两边为供电两极接口，接线不区分正负极。<br>摄像机电源常识 <a href="https://mp.weixin.qq.com/s/N-ffRdC-94Nl_AXFRXGckw">https://mp.weixin.qq.com/s/N-ffRdC-94Nl_AXFRXGckw</a></p>
<p>Ø  摄像头加入主机步骤：<br>安装部署好新摄像头后，第一步需要激活摄像头，到海康威视下载 SADP 工具来搜索局域网内所有摄像头，笔记本接入局域网内，设置本地设置 IP 为 摄像头默认的网段（192.168.1.1），点击激活状态，查找未激活的摄像头，选中他们设置 IP 等参数，然后激活它们。激活成功后到录像主机里添加对应的摄像头。（注意：每次修改后参数都需要重启一下 SADP 软件）</p>
<p>问题 1: 录像主机添加摄像头时，出现感叹号，提示不支持 IP 通道码流类型时<br>解决方法：浏览器访问到对应的摄像头登录，修改配置里的视频编码类型（H.264，H.265）<br>问题 2: 忘记摄像头的管理密码<br>解决方法：在 SADP 里头搜索到要改密码的摄像头，选中它然后点击右下角的忘记密码，点击二维码，打开微信公众号海康威视客服助手 - 重置密码 - 扫码找回</p>
<p>Ø  单通道录像文件大小计算公式如下：<br>文件大小（GBps）= 码流（Kbps）÷8×3600× 每天录像时间（hour）÷1024÷1024<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172322.png" alt="Img"></p>
<p>海康威视专用监控管理平台 IVMS4200<br>摄像头发现激活管理配置工具 SADP<br>详情下载见海康威视官网</p>
<h3 id="排错篇"><a href="#排错篇" class="headerlink" title="排错篇"></a>排错篇</h3><h4 id="当使用浏览器访问摄像头画面时出现失败"><a href="#当使用浏览器访问摄像头画面时出现失败" class="headerlink" title="当使用浏览器访问摄像头画面时出现失败"></a>当使用浏览器访问摄像头画面时出现失败</h4><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172427.png" alt="Img"><br>解决方法：这种情况一般是摄像头固件版本较低导致浏览器访问不了，比如可查看摄像头出厂时间和版本信息是否比较早等。需要升级固件来解决。<br>准备条件：<br>1，笔记本与摄像头网络通畅<br>2，下载摄像头固件新版本（可询问公众号海康威视客户服务）<br>3，将摄像头添加到 4200 客户端，通过远程升级<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172441.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172444.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172448.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172451.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172454.png" alt="Img"></p>
<h2 id="IDC相关"><a href="#IDC相关" class="headerlink" title="IDC相关"></a>IDC 相关</h2><h3 id="光纤配线架"><a href="#光纤配线架" class="headerlink" title="光纤配线架"></a>光纤配线架</h3><p>光纤配线架（Optical Distribution Frame）ODF，是光传输系统中一个重要的配套设备，它主要用于光缆终端的光纤熔接、光连接器安装、光路的调接、多余尾纤的存储及光缆的保护等，它对于光纤通信网络安全运行和灵活使用有着重要的作用。</p>
<p>光纤配线架的特点<br>近年来，在光通信建设的实际工作中，通过对几种产品的使用比较，我们认为光纤配线架的选型应重点考虑以下几个方面。</p>
<p>纤芯容量<br>一个光纤配线架应该能使局内的最大芯数的光缆完整上架，在可能的情况下，可将相互联系比较多的几条光缆上在一个架中，以方便光路调配。同时配线架容量应与通用光缆芯数系列相对应，这样在使用时可减少或避免由于搭配不当而造成光纤配线架容量浪费。</p>
<p>功能种类<br>光纤配线架作为光缆线路的终端设备应具有 4 项基本功能。<br>固定功能光缆进入机架后，对其外护套和加强芯要进行机械固定，加装地线保护部件，进行端头保护处理，并对光纤进行分组和保护。<br>熔接功能光缆中引出的光纤与尾缆熔接后，将多余的光纤进行盘绕储存，并对熔接接头进行保护。<br>调配功能将尾缆上连带的连接器插接到适配器上，与适配器另一侧的光连接器实现光路对接。适配器与连接器应能够灵活插、拔；光路可进行自由调配和测试。<br>存储功能为机架之间各种交叉连接的光连接线提供存储，使它们能够规则整齐地放置。光纤配线架内应有适当的空间和方式，使这部分光连接线走线清晰，调整方便，并能满足最小弯曲半径的要求。<br>随着光纤网络的发展，光纤配线架现有的功能已不能满足许多新的要求。有些厂家将一些光纤网络部件如分光器、波分复用器和光开关等直接加装到光纤配线架上。这样，既使这些部件方便地应用到网络中，又给光纤配线架增加了功能和灵活性。</p>
<p>常见的 ODF 配线架<br>常见的 ODF 配线架芯数有：12 芯、24 芯、48 芯、72 芯、96 芯、144 芯等。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172813.png" alt="Img"><br>ODF 中的盘纤盘<br>根据光缆及接口方式的不同，可选择的光纤耦合器有 FC、ST、SC、LC 等，光缆有室内外单模、多模、万兆 OM3 光缆。</p>
<p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172831.png" alt="Img"><br>FC 光纤适配器</p>
<p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172847.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172853.png" alt="Img"><br>SC 光纤适配器</p>
<p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172923.png" alt="Img"><br>LC 光纤适配器</p>
<p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508172936.png" alt="Img"><br>ST 光纤适配器</p>
<p>盘纤盘为什么叫一体化熔纤盘？它包含塑料盘、光纤耦合器、光纤尾纤（多数采用束状尾纤）。<br>束状尾纤介绍<br>尾纤束，又称束状尾纤，只有一端有连接头，而另一端是一根光纤的断头，通过熔接与其他光缆纤芯相连，常出现在光纤终端盒、光纤配线架内，用于连接光缆与终端设备。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173010.png" alt="Img"><br>光纤耦合器是光纤与光纤之间进行可拆卸 (活动) 连接的器件，它是把光纤的两个端面紧密对接起来，以使发射光纤输出的光能量能最大限度地耦合到接收光纤中去，并使其介入光链路从而对系统造成的影响减到最小。<br>常用到的光纤耦合器如下：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173021.png" alt="Img"><br>其中 ODF 中的 FC 耦合器一般用方形耦合器代替。</p>
<h3 id="光纤跳线区别"><a href="#光纤跳线区别" class="headerlink" title="光纤跳线区别"></a>光纤跳线区别</h3><ol>
<li>LCSC 光纤跳线的区别<br>1、接口不同：<br>SC 接口为蓝色大方口，外壳呈矩形；LC 接口为蓝色小方口。<br>2、连接方式不同：<br>SC 接头外壳为矩形，采用直接插拔的方式与 SC 耦合器相连接，无需旋转；LC 接头用于连接 SFP 光纤模块，采用操作方便的模块化插孔（RJ）闩锁机理。<br>3、用途不同：<br>SC 在路由器交换机上用得最多；LC 在服务器上常用。</li>
<li>ST、SC 连接器接头常用于一般网络。<br>ST 头插入后旋转半周有一卡口固定，缺点是容易折断；SC 连接头直接插拔，使用很方便，缺点是容易掉出来；FC 连接头一般电信网络采用，有一螺帽拧到适配器上，优点是牢靠、防灰尘，缺点是安装时间稍长。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173104.png" alt="Img"></li>
<li>SX/LH 表示可以使用单模或多模光纤<br>在表示尾纤接头的标注中，我们常能见到 “FC/PC”，“SC/PC” 等，其含义如下<br>“/” 前面部分表示尾纤的连接器型号<br>“SC” 接头是标准方型接头，采用工程塑料，具有耐高温，不容易氧化优点。传输设备侧光接口一般用 SC 接头<br>“LC” 接头与 SC 接头形状相似，较 SC 接头小一些。<br>“FC” 接头是金属接头，一般在 ODF 侧采用，金属接头的可插拔次数比塑料要多。</li>
</ol>
<h3 id="PON、EPON、GPON架构网络设备知识（光纤入户）"><a href="#PON、EPON、GPON架构网络设备知识（光纤入户）" class="headerlink" title="PON、EPON、GPON架构网络设备知识（光纤入户）"></a>PON、EPON、GPON 架构网络设备知识（光纤入户）</h3><p><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173133.png" alt="Img"><br>基础术语：<br>1、PON 介绍</p>
<p>PON（无源光网络）技术（包括 EPON，GPON）是发展 FTTx（光纤到户）的主要实现技术，它可节省主干光纤资源和网络层次，在长距离传输条件下可提供双向高带宽能力，接入业务种类丰富，其远程管理能力和无源光分配网结构可大幅降低运维成本，可支持多种应用场景 。</p>
<p>2、APON（ATMPON）</p>
<p>ATM 是一种基于信元的传输协议。155Mb/s 的 PON 系统技术规范， ITU-TG.983 系列标准；</p>
<p>3、BPON（BroadbandPON）</p>
<p>APON 标准后来得到了加强，可支持 622Mb/s 的传输速率，同时加上了动态带宽分配、保护等功能。</p>
<p>4、EPON 介绍</p>
<p>EPON (以太网无源光网络) 是一种采用点到多点网络结构、无源光纤传输方式、基于高速以太网平台和 TDM (时分复用 ) 时分 MAC 媒体访问控制方式、提供多种综合业务的宽带接入技术。</p>
<p>5、GPON 介绍</p>
<p>GPON (千兆比无源光网络) 技术是基于 ITU-TG.984.x（国际电联 TG.984.x）标准的最新一代宽带无源光综合接入标准，具有高带宽，高效率，大覆盖范围，用户接口丰富等众多优点，被大多数运营商视为实现接入网业务宽带化，综合化改造的理想技术。</p>
<p>光纤入户:<br>过程中会涉及到相关的设备，其中最为关键的有 OLT、分光器、ONU、交换机等</p>
<p>1、OLT 介绍<br>OLT：optical line terminal (光线路终端），用于连接干线的终端设备。OLT 是光接入网的核心部件，相当于传统通信网中的交换机或路由器，也是一个多业务提供平台。一般放置在局端，提供面向用户的无源光纤网络的光纤接口。它主要实现的功能是：上联上层网络，完成 PON 网络的上行接入。通过 ODN 网络（由光纤和无源分光器组成）下连用户端设备 ONU。实现对用户端设备 ONU 的控制、管理和测距等功能。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173155.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173158.png" alt="Img"><br>2、分光器<br>分光器是一种无源器件，又称光分路器，它们不需要外部能量，只要有输入光即可。分光器由入射和出射狭缝、反射镜和色散元件组成，其作用是将所需要的共振吸收线分离出来。分光器是组建 PON 网络的一个组件，是一个连接 OLT 和 ONU 的无源设备，它的功能是分发下行数据，并集中上行数据。 分光器带有一个上行光接口，若干下行光接口。1:N    常用分光器的分路比有 1:2、1:4、1:8、1:16、1:32、1:64 几种。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173209.png" alt="Img"><br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173211.png" alt="Img"><br>3、ONU 介绍<br>ONU 光网络单元，ONU 分为有源光网络单元和无源光网络单元。一般把装有包括光接收机、上行光发射机、多个桥接放大器网络监控的设备叫做光节点。PON 使用单光纤连接到 OLT，然后 OLT 连接到 ONU。ONU 提供数据、IPTV（即交互式网络电视），语音（使用 IAD，即 Integrated Access Device 综合接入设备）等业务。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173222.png" alt="Img"><br>ONU 的应用可以看如下图：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173235.png" alt="Img"><br>ONU 具有两点作用：对 OLT 发送的广播进行选择性接收，若需要接收该数据要对 OLT 进行接收响应；对用户的需要发送的以太网数据进行收集和缓存，按照被分配的发送窗口向 OLT 端发送该缓存数据。应用 ONU 可以有效提高整个系统的上行带宽利用率，还能够根据网络应用环境和适用业务特点对信道带宽进行配置，在不影响通信效率和通信质量的条件下承载尽量多的终端用户，提高网络利用率，降低用户成本。</p>
<h3 id="交换机介绍"><a href="#交换机介绍" class="headerlink" title="交换机介绍"></a>交换机介绍</h3><p>交换机（Switch）意为” 开关” 是一种用于电（光）信号转发的网络设备，实现设备与设备之间数据交换，达到相互访问功能。它可以为接入交换机的任意两个网络节点提供独享的电信号通路。最常见的交换机是以太网交换机。交换机总类非常多，不同总类有不同叫法，按设备层级接入有接入型交换机，汇聚型交换机及核心交换机；还有交换层分为二层交换机、三层交换机、四层交换机等。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173305.png" alt="Img"><br>5、光猫<br>光猫是数字调制解调器，把光信号转换成数字信号，是一种类似于基带 modem（数字调制解调器）的设备，和基带 modem 不同的是接入的是光纤专线，是光信号。光猫用于广域网中光电信号的转换和接口协议的转换（重点），接入路由器，是广域网接入。光纤收发器是用局域网中光电信号的转换，而仅仅是信号转换，没有接口协议的转换。光纤入户后，基本放在家庭弱电箱里，以白色为主，印有运营商 LOGO，办理宽带时运营商免费赠送的。<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173320.png" alt="Img"><br>光纤收发器 （单模 多模）<br>参见：<a href="https://blog.csdn.net/pokes/article/details/122154492">https://blog.csdn.net/pokes/article/details/122154492</a><br>单模光纤采用固体激光器做光源，多模光纤采用发光二极管做光源；</p>
<p>单模光纤传输频带宽、传输距离长，但是需要激光源，成本较高，多模光纤传输速度低、距离短，成本低；<br>多模：采用 LED（发光二极管）或垂直腔面发射激光器（VCSEL）作为光源，因为 LED 光源能产生许多模式的光（光较分散）。<br>单模：采用激光器或激光二极管作为光源，因为激光光源能产生单一模式的光，具备高亮度、高功率等优势。<br>当光纤收发器内嵌光模块时，光纤收发器按照所连接的光纤跳线的纤芯的数量的不同分为单纤收发器与双纤收发器。<br>单纤收发器：单纤收发器连接的光纤跳线的线性为一个纤芯，这一个纤芯既负责传输数据又负责接收数据；<br>双纤收发器：双纤收发器所连接的光纤跳线的线性为两个纤芯，其中一个纤芯负责传输数据，另一个纤芯负责接收数据。<br>当光纤收发器没有内嵌光模块时，需要根据所插入的光模块来区分是单纤收发器还是双纤收发器。当光纤收发器内插入的是单纤双向光模块，即接口为单工类型时，此光纤收发器为单纤收发器；当光纤收发器内插入的是双纤双向光模块，即接口为双工类型时，此收发器为双纤收发器。</p>
<h2 id="网站备案"><a href="#网站备案" class="headerlink" title="网站备案"></a>网站备案</h2><p>备案概述 - 网站备案 - 备案介绍：<br>各大企业云官网均可以完成备案需求<br>参见华为云备案：<a href="https://support.huaweicloud.com/icp/index.html">https://support.huaweicloud.com/icp/index.html</a></p>
<h3 id="备案概述"><a href="#备案概述" class="headerlink" title="备案概述"></a>备案概述</h3><p>为了规范互联网信息服务活动，促进互联网信息服务健康有序发展，根据国务院令第 292 号《互联网信息服务管理办法》和工信部令第 33 号《非经营性互联网信息服务备案管理办法》规定，国家对经营性互联网信息服务实行许可制度，对非经营性互联网信息服务实行备案制度。未取得许可或者未履行备案手续的，不得从事互联网信息服务，否则就属于违法行为。</p>
<p>通俗来讲：想要开办网站必须先办理网站备案，备案成功取得通信管理局下发的 ICP 备案号后才能开通访问。</p>
<h4 id="备案的目的"><a href="#备案的目的" class="headerlink" title="备案的目的"></a>备案的目的</h4><p>根据国家有关规定，使用大陆服务器开办网站，需要先进行网站备案并获取通信管理局下发的 ICP 备案号，然后才能开通网站访问。</p>
<p>备案成功后，通信管理局会分配主体备案号给备案主体（个人或单位均可称为主体），同时也会给此次备案的网站分配网站备案号。</p>
<p>主体备案号格式为：（省简写）ICP 备 + 主体序列号（8 位数字）</p>
<p>网站备案号格式为：（省简写）ICP 备 + 主体序列号（8 位数字）- 网站序列号</p>
<p>举例：</p>
<p>天翼云官网（域名 ctyun.cn）的网站备案号为：京 ICP 备 12022551 号 - 1 </p>
<p>公司主体备案号为：京 ICP 备 12022551 号。</p>
<h4 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h4><p>备案只针对一级域名</p>
<p>只需备案一级域名，一级域名备案后对应的二级域名、三级域名可以正常使用。</p>
<p>举例：天翼云官网的一级域名为：ctyun.cn，备案完成后对应的二级域名：xx.ctyun.cn 均可正常使用。</p>
<p>境外注册域名不可进行备案。</p>
<h4 id="备案类型"><a href="#备案类型" class="headerlink" title="备案类型"></a>备案类型</h4><p>根据主体和域名是否第一次做备案，可以分为不同的备案类型，不同的备案类型填写的信息略有差异。</p>
<h4 id="增加备案信息的类型"><a href="#增加备案信息的类型" class="headerlink" title="增加备案信息的类型"></a>增加备案信息的类型</h4><p>首次备案（新增备案）：主体和域名均为第一次做备案。</p>
<p>新增网站：该主体已备案过其他网站，此次填写的域名是第一次做备案。</p>
<p>接入备案：主体和域名均已备案，此次备案是办理接入商的变更。</p>
<p>您在填写前可登陆：</p>
<p>beian.miit.gov.cn 进行备案类型验证。</p>
<h4 id="删除备案信息的类型"><a href="#删除备案信息的类型" class="headerlink" title="删除备案信息的类型"></a>删除备案信息的类型</h4><p>注销主体：删除该主体下的所有备案信息，包括主体信息和网站信息</p>
<p>注销网站：删除主体下的某个网站，主体信息仍然保留</p>
<p>取消接入：删除备案信息和接入商的关联，建议在新的接入商处完成接入备案后再取消接入，否则备案信息可能会被通信管理局注销</p>
<h4 id="修改备案信息的类型"><a href="#修改备案信息的类型" class="headerlink" title="修改备案信息的类型"></a>修改备案信息的类型</h4><p>变更主体：变更主体信息，如修改公司通信地址等</p>
<p>变更网站：变更网站信息，如新增域名、修改网站负责人、变更 IP 等</p>
<p>只有在天翼云完成备案的网站，才可以提交变更。</p>
<h3 id="备案需要准备什么材料"><a href="#备案需要准备什么材料" class="headerlink" title="备案需要准备什么材料"></a>备案需要准备什么材料</h3><h4 id="个人备案"><a href="#个人备案" class="headerlink" title="个人备案"></a>个人备案</h4><p>A. 二代身份证扫描件或拍照件</p>
<p>B. 《网站备案真实性核验单》：可登陆 <a href="https://www.ctyun.cn/record2/index%EF%BC%8C%E6%A0%B9%E6%8D%AE%E8%8A%82%E7%82%B9%E4%B8%8B%E8%BD%BD%EF%BC%9A%E4%BA%91%E4%B8%9A%E5%8A%A1%E7%9C%9F%E5%AE%9E%E6%80%A7%E6%A0%B8%E9%AA%8C%E5%8D%95%E3%80%82">https://www.ctyun.cn/record2/index，根据节点下载：云业务真实性核验单。</a></p>
<p>C. 电子版域名证书：</p>
<p>可登陆注册域名的网站下载域名证书，或登陆 whois.chinaz.com，输入域名后将像是到期时间的页面进行截图。</p>
<p>根据《工业和信息化部关于规范互联网信息服务使用域名的通知》工信部信管﹝2017﹞264 号规定，自 2018 年 1 月 1 日起，域名注册所有人必须是备案主体或者备案主体单位法人。</p>
<p>D. 电子版信息需原件的地区（可选）：</p>
<p>根据管局规定，浙江、宁夏、上海、内蒙、河北、湖南、北京、陕西、重庆、四川、甘肃、天津、黑龙江、山东地区所上传电子版必须为原件扫描件或拍照。不可使用彩色复印件。</p>
<p>E. 真实性承诺书（可选）：</p>
<p>使用广东、成都节点邮寄纸质材料时，需提供真实性承诺书，并填写完整，在指定位置签字或盖章。下载位置：<a href="https://www.ctyun.cn/record2/index%E3%80%82">https://www.ctyun.cn/record2/index。</a></p>
<h4 id="单位备案"><a href="#单位备案" class="headerlink" title="单位备案"></a>单位备案</h4><p>A. 单位证件：</p>
<p>企业需提供营业执照（副本）扫描件 / 拍照件、企事业等单位提供组织结构代码证扫描件 / 拍照件</p>
<p>B. 负责人身份证扫描件 / 拍照件（外国人可提供护照等其他证件）</p>
<p>C. 《网站备案真实性核验单》：下载位置：<a href="https://www.ctyun.cn/record2/index">https://www.ctyun.cn/record2/index</a> 根据节点下载云业务真实性核验单</p>
<p>D. 可登陆注册域名的网站下载域名证书，或登陆 whois.chinaz.com，输入域名后将像是到期时间的页面进行截图。</p>
<p>根据《工业和信息化部关于规范互联网信息服务使用域名的通知》工信部信管﹝2017﹞264 号规定，自 2018 年 1 月 1 日起，域名注册所有人必须是备案主体或者备案主体单位法人。</p>
<p>E. 网站负责人法人授权书（可选）：</p>
<p>如果网站负责人填写的不是法人，还需额外提供授权书。下载位置：<a href="https://www.ctyun.cn/record2/index">https://www.ctyun.cn/record2/index</a> 根据不同节点下载：委托书。</p>
<p>E. 真实性承诺书（可选）：</p>
<p>使用广东、成都节点邮寄纸质材料时，需提供真实性承诺书，并填写完整，在指定位置签字或盖章。下载位置：<a href="https://www.ctyun.cn/record2/index%E3%80%82">https://www.ctyun.cn/record2/index。</a></p>
<h4 id="接入备案"><a href="#接入备案" class="headerlink" title="接入备案"></a>接入备案</h4><p>为什么要办理接入备案？根据国家相关要求，如果您已在 A 接入商购买服务器并成功办理了网站备案，当您将网站重新搭建在 B 接入商平台上后（或网站同时在多家接入商平台上运营），原来的备案信息需要同时接入 B 接入商，备案信息接入 B 接入商的过程称为 “接入备案”。</p>
<p>另外，如果不办理接入备案即开通网站，您的网站将有可能被阻断无法访问</p>
<h4 id="使用海外服务器不需要备案"><a href="#使用海外服务器不需要备案" class="headerlink" title="使用海外服务器不需要备案"></a>使用海外服务器不需要备案</h4><p>购买中国香港或海外服务器无需备案，备案仅针对国内 ip。</p>
<h4 id="境外企业如何备案"><a href="#境外企业如何备案" class="headerlink" title="境外企业如何备案"></a>境外企业如何备案</h4><p>目前境外企业无法备案，需要在大陆设立分公司持有国家认可的单位证件才能进行备案。（建议境外企业考虑使用中国香港服务器，使用中国香港服务器无需备案）</p>
<h4 id="备案专有名词"><a href="#备案专有名词" class="headerlink" title="备案专有名词"></a>备案专有名词</h4><p>一级域名：一级域名也叫顶级域名，abc.com 即为一级域名，a.abc.com 为二级域名；几级域名不单单是以符号 “.” 的个数来定，如 abc.edu.cn 也为一级域名，因为 edu.cn 本身也是一个域名后缀。</p>
<p>主体：办理备案的个人或者单位均称为备案主体</p>
<p>接入商：提供网站搭建平台并协助您办理备案的即为接入商</p>
<p>主体负责人：单位办理备案时填写的主办单位负责人，一般建议填写公司法人</p>
<p>网站负责人：单位办理备案时填写的网站负责人，负责网站建设等工作，可以填写法人也可以根据实际情况填写相关负责人<br>备案限制</p>
<h3 id="网站、域名数量限制"><a href="#网站、域名数量限制" class="headerlink" title="网站、域名数量限制"></a>网站、域名数量限制</h3><p>1 个 IP 可以备案 5 个网站。</p>
<h4 id="不备案会有什么影响"><a href="#不备案会有什么影响" class="headerlink" title="不备案会有什么影响"></a>不备案会有什么影响</h4><p>建议准备搭建网站的客户先备案再开通网站。如果网站域名已存在备案号，但之前不是在天翼云备案的，也请您先办理接入备案，待接入备案通过通信管理局审核后，再解析到天翼云服务器。<br> 备案需要什么材料？</p>
<p>A：企业：单位证件、法人身份证、网站负责人身份证、域名证书、安全承诺书、委托书（主体负责人与网站管理员为同一人时可不用提供）、真实性核验单、现场核验照。</p>
<p>快速网站备案流程如下：<br><img src="/./FILES/%E8%BF%90%E7%BB%B4%E7%AC%94%E8%AE%B0.md/img-20250508173503.png" alt="Img"></p>
]]></content>
      <categories>
        <category>运维</category>
      </categories>
  </entry>
</search>
